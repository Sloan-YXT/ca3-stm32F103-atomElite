; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--c99 --list --split_sections --debug -c --asm --interleave -o..\obj\tjpgd.o --asm_dir=..\OBJ\ --list_dir=..\OBJ\ --depend=..\obj\tjpgd.d --cpu=Cortex-M3 --apcs=interwork -O0 --diag_suppress=9931 -I..\ATK-ESP8266 -I..\CORE -I..\FATFS\src -I..\FATFS\exfuns -I..\HARDWARE\24CXX -I..\HARDWARE\IIC -I..\HARDWARE\KEY -I..\HARDWARE\LCD -I..\HARDWARE\LED -I..\HARDWARE\SDIO -I..\HARDWARE\SPI -I..\HARDWARE\TIMER -I..\HARDWARE\TOUCH -I..\HARDWARE\USART3 -I..\HARDWARE\W25QXX -I..\MALLOC -I..\STM32F10x_FWLib\inc -I..\SYSTEM\delay -I..\SYSTEM\sys -I..\SYSTEM\usart -I..\TEXT -I..\USER -I..\USMART -I..\PICTURE -I..\HARDWARE\OV7725 -I..\HARDWARE\EXTI -I..\HARDWARE\BEEP -I..\HARDWARE\DHT11 -I.\RTE\_Target_1 -ID:\Users\86132\AppData\Local\Arm\Packs\Keil\STM32F1xx_DFP\2.3.0\Device\Include -ID:\Keil_v5\ARM\CMSIS\Include -D__UVISION_VERSION=529 -DSTM32F10X_HD -DSTM32F10X_HD -DUSE_STDPERIPH_DRIVER --omf_browse=..\obj\tjpgd.crf ..\PICTURE\tjpgd.c]
                          THUMB

                          AREA ||i.alloc_pool||, CODE, READONLY, ALIGN=1

                  alloc_pool PROC
;;;131    static
;;;132    void* alloc_pool (	/* Pointer to allocated memory block (NULL:no memory available) */
000000  4602              MOV      r2,r0
;;;133    	JDEC* jd,		/* Pointer to the decompressor object */
;;;134    	UINT nd			/* Number of bytes to allocate */
;;;135    )
;;;136    {
;;;137    	char *rp = 0;
000002  2000              MOVS     r0,#0
;;;138    
;;;139    
;;;140    	nd = (nd + 3) & ~3;			/* Align block size to the word boundary */
000004  1ccb              ADDS     r3,r1,#3
000006  f0230103          BIC      r1,r3,#3
;;;141    
;;;142    	if (jd->sz_pool >= nd) {
00000a  6f13              LDR      r3,[r2,#0x70]
00000c  428b              CMP      r3,r1
00000e  d305              BCC      |L1.28|
;;;143    		jd->sz_pool -= nd;
000010  6f13              LDR      r3,[r2,#0x70]
000012  1a5b              SUBS     r3,r3,r1
000014  6713              STR      r3,[r2,#0x70]
;;;144    		rp = (char*)jd->pool;			/* Get start of available memory pool */
000016  6ed0              LDR      r0,[r2,#0x6c]
;;;145    		jd->pool = (void*)(rp + nd);	/* Allocate requierd bytes */
000018  1843              ADDS     r3,r0,r1
00001a  66d3              STR      r3,[r2,#0x6c]
                  |L1.28|
;;;146    	}
;;;147    
;;;148    	return (void*)rp;	/* Return allocated memory block (NULL:no memory to allocate) */
;;;149    }
00001c  4770              BX       lr
;;;150    
                          ENDP


                          AREA ||i.bitext||, CODE, READONLY, ALIGN=1

                  bitext PROC
;;;253    static
;;;254    INT bitext (	/* >=0: extracted data, <0: error code */
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;255    	JDEC* jd,	/* Pointer to the decompressor object */
;;;256    	UINT nbit	/* Number of bits to extract (1 to 11) */
;;;257    )
;;;258    {
000004  4604              MOV      r4,r0
000006  4688              MOV      r8,r1
;;;259    	BYTE msk, s, *dp;
;;;260    	UINT dc, v, f;
;;;261    
;;;262    
;;;263    	msk = jd->dmsk; dc = jd->dctr; dp = jd->dptr;	/* Bit mask, number of data available, read ptr */
000008  7b26              LDRB     r6,[r4,#0xc]
00000a  6827              LDR      r7,[r4,#0]
00000c  6865              LDR      r5,[r4,#4]
;;;264    	s = *dp; v = f = 0;
00000e  f895a000          LDRB     r10,[r5,#0]
000012  2000              MOVS     r0,#0
000014  4683              MOV      r11,r0
000016  4681              MOV      r9,r0
;;;265    	do {
000018  bf00              NOP      
                  |L2.26|
;;;266    		if (!msk) {				/* Next byte? */
00001a  bb36              CBNZ     r6,|L2.106|
;;;267    			if (!dc) {			/* No input data is available, re-fill input buffer */
00001c  b967              CBNZ     r7,|L2.56|
;;;268    				dp = jd->inbuf;	/* Top of input buffer */
00001e  68a5              LDR      r5,[r4,#8]
;;;269    				dc = jd->infunc(jd, dp, JD_SZBUF);
000020  f44f6280          MOV      r2,#0x400
000024  4629              MOV      r1,r5
000026  4620              MOV      r0,r4
000028  6f63              LDR      r3,[r4,#0x74]
00002a  4798              BLX      r3
00002c  4607              MOV      r7,r0
;;;270    				if (!dc) return 0 - (INT)JDR_INP;	/* Err: read error or wrong stream termination */
00002e  b927              CBNZ     r7,|L2.58|
000030  f06f0001          MVN      r0,#1
                  |L2.52|
;;;271    			} else {
;;;272    				dp++;			/* Next data ptr */
;;;273    			}
;;;274    			dc--;				/* Decrement number of available bytes */
;;;275    			if (f) {			/* In flag sequence? */
;;;276    				f = 0;			/* Exit flag sequence */
;;;277    				if (*dp != 0) return 0 - (INT)JDR_FMT1;	/* Err: unexpected flag is detected (may be collapted data) */
;;;278    				*dp = s = 0xFF;			/* The flag is a data 0xFF */
;;;279    			} else {
;;;280    				s = *dp;				/* Get next data byte */
;;;281    				if (s == 0xFF) {		/* Is start of flag sequence? */
;;;282    					f = 1; continue;	/* Enter flag sequence */
;;;283    				}
;;;284    			}
;;;285    			msk = 0x80;		/* Read from MSB */
;;;286    		}
;;;287    		v <<= 1;	/* Get a bit */
;;;288    		if (s & msk) v++;
;;;289    		msk >>= 1;
;;;290    		nbit--;
;;;291    	} while (nbit);
;;;292    	jd->dmsk = msk; jd->dctr = dc; jd->dptr = dp;
;;;293    
;;;294    	return (INT)v;
;;;295    }
000034  e8bd9ff0          POP      {r4-r12,pc}
                  |L2.56|
000038  1c6d              ADDS     r5,r5,#1              ;272
                  |L2.58|
00003a  1e7f              SUBS     r7,r7,#1              ;274
00003c  f1bb0f00          CMP      r11,#0                ;275
000040  d00a              BEQ      |L2.88|
000042  f04f0b00          MOV      r11,#0                ;276
000046  7828              LDRB     r0,[r5,#0]            ;277
000048  b110              CBZ      r0,|L2.80|
00004a  f06f0005          MVN      r0,#5                 ;277
00004e  e7f1              B        |L2.52|
                  |L2.80|
000050  20ff              MOVS     r0,#0xff              ;278
000052  4682              MOV      r10,r0                ;278
000054  7028              STRB     r0,[r5,#0]            ;278
000056  e007              B        |L2.104|
                  |L2.88|
000058  f895a000          LDRB     r10,[r5,#0]           ;280
00005c  f1ba0fff          CMP      r10,#0xff             ;281
000060  d102              BNE      |L2.104|
000062  f04f0b01          MOV      r11,#1                ;282
000066  e00b              B        |L2.128|
                  |L2.104|
000068  2680              MOVS     r6,#0x80              ;285
                  |L2.106|
00006a  ea4f0949          LSL      r9,r9,#1              ;287
00006e  ea0a0006          AND      r0,r10,r6             ;288
000072  b108              CBZ      r0,|L2.120|
000074  f1090901          ADD      r9,r9,#1              ;288
                  |L2.120|
000078  1076              ASRS     r6,r6,#1              ;289
00007a  f1a80801          SUB      r8,r8,#1              ;290
00007e  bf00              NOP                            ;282
                  |L2.128|
000080  f1b80f00          CMP      r8,#0                 ;291
000084  d1c9              BNE      |L2.26|
000086  7326              STRB     r6,[r4,#0xc]          ;292
000088  6027              STR      r7,[r4,#0]            ;292
00008a  6065              STR      r5,[r4,#4]            ;292
00008c  4648              MOV      r0,r9                 ;294
00008e  e7d1              B        |L2.52|
;;;296    
                          ENDP


                          AREA ||i.block_idct||, CODE, READONLY, ALIGN=2

                  block_idct PROC
;;;366    static
;;;367    void block_idct (
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;368    	LONG* src,	/* Input block data (de-quantized and pre-scaled for Arai Algorithm) */
;;;369    	BYTE* dst	/* Pointer to the destination to store the block as byte array */
;;;370    )
;;;371    {
000004  b087              SUB      sp,sp,#0x1c
000006  460c              MOV      r4,r1
;;;372    	const LONG M13 = (LONG)(1.41421*4096), M2 = (LONG)(1.08239*4096), M4 = (LONG)(2.61313*4096), M5 = (LONG)(1.84776*4096);
000008  f44f5bb5          MOV      r11,#0x16a0
00000c  f8cdb018          STR      r11,[sp,#0x18]
000010  f2411b51          MOV      r11,#0x1151
000014  f8cdb014          STR      r11,[sp,#0x14]
000018  f6421bcf          MOV      r11,#0x29cf
00001c  f8cdb010          STR      r11,[sp,#0x10]
000020  f6415b90          MOV      r11,#0x1d90
000024  f8cdb00c          STR      r11,[sp,#0xc]
;;;373    	LONG v0, v1, v2, v3, v4, v5, v6, v7;
;;;374    	LONG t10, t11, t12, t13;
;;;375    	UINT i;
;;;376    
;;;377    	/* Process columns */
;;;378    	for (i = 0; i < 8; i++) {
000028  f04f0b00          MOV      r11,#0
00002c  f8cdb000          STR      r11,[sp,#0]
000030  e080              B        |L3.308|
                  |L3.50|
;;;379    		v0 = src[8 * 0];	/* Get even elements */
000032  f8d0c000          LDR      r12,[r0,#0]
;;;380    		v1 = src[8 * 2];
000036  f8d08040          LDR      r8,[r0,#0x40]
;;;381    		v2 = src[8 * 4];
00003a  f8d09080          LDR      r9,[r0,#0x80]
;;;382    		v3 = src[8 * 6];
00003e  f8d010c0          LDR      r1,[r0,#0xc0]
;;;383    
;;;384    		t10 = v0 + v2;		/* Process the even elements */
000042  eb0c0a09          ADD      r10,r12,r9
;;;385    		t12 = v0 - v2;
000046  ebac0b09          SUB      r11,r12,r9
00004a  f8cdb008          STR      r11,[sp,#8]
;;;386    		t11 = (v1 - v3) * M13 >> 12;
00004e  eba80b01          SUB      r11,r8,r1
000052  f44f5eb5          MOV      lr,#0x16a0
000056  fb0bfb0e          MUL      r11,r11,lr
00005a  ea4f372b          ASR      r7,r11,#12
;;;387    		v3 += v1;
00005e  4441              ADD      r1,r1,r8
;;;388    		t11 -= v3;
000060  1a7f              SUBS     r7,r7,r1
;;;389    		v0 = t10 + v3;
000062  eb0a0c01          ADD      r12,r10,r1
;;;390    		v3 = t10 - v3;
000066  ebaa0101          SUB      r1,r10,r1
;;;391    		v1 = t11 + t12;
00006a  f8ddb008          LDR      r11,[sp,#8]
00006e  eb07080b          ADD      r8,r7,r11
;;;392    		v2 = t12 - t11;
000072  f8ddb008          LDR      r11,[sp,#8]
000076  ebab0907          SUB      r9,r11,r7
;;;393    
;;;394    		v4 = src[8 * 7];	/* Get odd elements */
00007a  f8d050e0          LDR      r5,[r0,#0xe0]
;;;395    		v5 = src[8 * 1];
00007e  6a03              LDR      r3,[r0,#0x20]
;;;396    		v6 = src[8 * 5];
000080  f8d060a0          LDR      r6,[r0,#0xa0]
;;;397    		v7 = src[8 * 3];
000084  6e02              LDR      r2,[r0,#0x60]
;;;398    
;;;399    		t10 = v5 - v4;		/* Process the odd elements */
000086  eba30a05          SUB      r10,r3,r5
;;;400    		t11 = v5 + v4;
00008a  195f              ADDS     r7,r3,r5
;;;401    		t12 = v6 - v7;
00008c  eba60b02          SUB      r11,r6,r2
000090  f8cdb008          STR      r11,[sp,#8]
;;;402    		v7 += v6;
000094  4432              ADD      r2,r2,r6
;;;403    		v5 = (t11 - v7) * M13 >> 12;
000096  eba70b02          SUB      r11,r7,r2
00009a  fb0bfb0e          MUL      r11,r11,lr
00009e  ea4f332b          ASR      r3,r11,#12
;;;404    		v7 += t11;
0000a2  443a              ADD      r2,r2,r7
;;;405    		t13 = (t10 + t12) * M5 >> 12;
0000a4  f8ddb008          LDR      r11,[sp,#8]
0000a8  44d3              ADD      r11,r11,r10
0000aa  f6415e90          MOV      lr,#0x1d90
0000ae  fb0bfb0e          MUL      r11,r11,lr
0000b2  ea4f3b2b          ASR      r11,r11,#12
0000b6  f8cdb004          STR      r11,[sp,#4]
;;;406    		v4 = t13 - (t10 * M2 >> 12);
0000ba  f2411b51          MOV      r11,#0x1151
0000be  fb0afe0b          MUL      lr,r10,r11
0000c2  f8ddb004          LDR      r11,[sp,#4]
0000c6  ebab352e          SUB      r5,r11,lr,ASR #12
;;;407    		v6 = t13 - (t12 * M4 >> 12) - v7;
0000ca  f6421ecf          MOV      lr,#0x29cf
0000ce  f8ddb008          LDR      r11,[sp,#8]
0000d2  fb0bfe0e          MUL      lr,r11,lr
0000d6  f8ddb004          LDR      r11,[sp,#4]
0000da  ebab3b2e          SUB      r11,r11,lr,ASR #12
0000de  ebab0602          SUB      r6,r11,r2
;;;408    		v5 -= v6;
0000e2  1b9b              SUBS     r3,r3,r6
;;;409    		v4 -= v5;
0000e4  1aed              SUBS     r5,r5,r3
;;;410    
;;;411    		src[8 * 0] = v0 + v7;	/* Write-back transformed values */
0000e6  eb0c0b02          ADD      r11,r12,r2
0000ea  f8c0b000          STR      r11,[r0,#0]
;;;412    		src[8 * 7] = v0 - v7;
0000ee  ebac0b02          SUB      r11,r12,r2
0000f2  f8c0b0e0          STR      r11,[r0,#0xe0]
;;;413    		src[8 * 1] = v1 + v6;
0000f6  eb080b06          ADD      r11,r8,r6
0000fa  f8c0b020          STR      r11,[r0,#0x20]
;;;414    		src[8 * 6] = v1 - v6;
0000fe  eba80b06          SUB      r11,r8,r6
000102  f8c0b0c0          STR      r11,[r0,#0xc0]
;;;415    		src[8 * 2] = v2 + v5;
000106  eb090b03          ADD      r11,r9,r3
00010a  f8c0b040          STR      r11,[r0,#0x40]
;;;416    		src[8 * 5] = v2 - v5;
00010e  eba90b03          SUB      r11,r9,r3
000112  f8c0b0a0          STR      r11,[r0,#0xa0]
;;;417    		src[8 * 3] = v3 + v4;
000116  eb010b05          ADD      r11,r1,r5
00011a  f8c0b060          STR      r11,[r0,#0x60]
;;;418    		src[8 * 4] = v3 - v4;
00011e  eba10b05          SUB      r11,r1,r5
000122  f8c0b080          STR      r11,[r0,#0x80]
;;;419    
;;;420    		src++;	/* Next column */
000126  1d00              ADDS     r0,r0,#4
000128  f8ddb000          LDR      r11,[sp,#0]           ;378
00012c  f10b0b01          ADD      r11,r11,#1            ;378
000130  f8cdb000          STR      r11,[sp,#0]           ;378
                  |L3.308|
000134  f8ddb000          LDR      r11,[sp,#0]           ;378
000138  f1bb0f08          CMP      r11,#8                ;378
00013c  f4ffaf79          BCC      |L3.50|
;;;421    	}
;;;422    
;;;423    	/* Process rows */
;;;424    	src -= 8;
000140  3820              SUBS     r0,r0,#0x20
;;;425    	for (i = 0; i < 8; i++) {
000142  f04f0b00          MOV      r11,#0
000146  f8cdb000          STR      r11,[sp,#0]
00014a  e0a2              B        |L3.658|
                  |L3.332|
;;;426    		v0 = src[0] + (128L << 8);	/* Get even elements (remove DC offset (-128) here) */
00014c  f8d0b000          LDR      r11,[r0,#0]
000150  f50b4c00          ADD      r12,r11,#0x8000
;;;427    		v1 = src[2];
000154  f8d08008          LDR      r8,[r0,#8]
;;;428    		v2 = src[4];
000158  f8d09010          LDR      r9,[r0,#0x10]
;;;429    		v3 = src[6];
00015c  6981              LDR      r1,[r0,#0x18]
;;;430    
;;;431    		t10 = v0 + v2;				/* Process the even elements */
00015e  eb0c0a09          ADD      r10,r12,r9
;;;432    		t12 = v0 - v2;
000162  ebac0b09          SUB      r11,r12,r9
000166  f8cdb008          STR      r11,[sp,#8]
;;;433    		t11 = (v1 - v3) * M13 >> 12;
00016a  eba80b01          SUB      r11,r8,r1
00016e  f44f5eb5          MOV      lr,#0x16a0
000172  fb0bfb0e          MUL      r11,r11,lr
000176  ea4f372b          ASR      r7,r11,#12
;;;434    		v3 += v1;
00017a  4441              ADD      r1,r1,r8
;;;435    		t11 -= v3;
00017c  1a7f              SUBS     r7,r7,r1
;;;436    		v0 = t10 + v3;
00017e  eb0a0c01          ADD      r12,r10,r1
;;;437    		v3 = t10 - v3;
000182  ebaa0101          SUB      r1,r10,r1
;;;438    		v1 = t11 + t12;
000186  f8ddb008          LDR      r11,[sp,#8]
00018a  eb07080b          ADD      r8,r7,r11
;;;439    		v2 = t12 - t11;
00018e  f8ddb008          LDR      r11,[sp,#8]
000192  ebab0907          SUB      r9,r11,r7
;;;440    
;;;441    		v4 = src[7];				/* Get odd elements */
000196  69c5              LDR      r5,[r0,#0x1c]
;;;442    		v5 = src[1];
000198  6843              LDR      r3,[r0,#4]
;;;443    		v6 = src[5];
00019a  6946              LDR      r6,[r0,#0x14]
;;;444    		v7 = src[3];
00019c  68c2              LDR      r2,[r0,#0xc]
;;;445    
;;;446    		t10 = v5 - v4;				/* Process the odd elements */
00019e  eba30a05          SUB      r10,r3,r5
;;;447    		t11 = v5 + v4;
0001a2  195f              ADDS     r7,r3,r5
;;;448    		t12 = v6 - v7;
0001a4  eba60b02          SUB      r11,r6,r2
0001a8  f8cdb008          STR      r11,[sp,#8]
;;;449    		v7 += v6;
0001ac  4432              ADD      r2,r2,r6
;;;450    		v5 = (t11 - v7) * M13 >> 12;
0001ae  eba70b02          SUB      r11,r7,r2
0001b2  fb0bfb0e          MUL      r11,r11,lr
0001b6  ea4f332b          ASR      r3,r11,#12
;;;451    		v7 += t11;
0001ba  443a              ADD      r2,r2,r7
;;;452    		t13 = (t10 + t12) * M5 >> 12;
0001bc  f8ddb008          LDR      r11,[sp,#8]
0001c0  44d3              ADD      r11,r11,r10
0001c2  f6415e90          MOV      lr,#0x1d90
0001c6  fb0bfb0e          MUL      r11,r11,lr
0001ca  ea4f3b2b          ASR      r11,r11,#12
0001ce  f8cdb004          STR      r11,[sp,#4]
;;;453    		v4 = t13 - (t10 * M2 >> 12);
0001d2  f2411b51          MOV      r11,#0x1151
0001d6  fb0afe0b          MUL      lr,r10,r11
0001da  f8ddb004          LDR      r11,[sp,#4]
0001de  ebab352e          SUB      r5,r11,lr,ASR #12
;;;454    		v6 = t13 - (t12 * M4 >> 12) - v7;
0001e2  f6421ecf          MOV      lr,#0x29cf
0001e6  f8ddb008          LDR      r11,[sp,#8]
0001ea  fb0bfe0e          MUL      lr,r11,lr
0001ee  f8ddb004          LDR      r11,[sp,#4]
0001f2  ebab3b2e          SUB      r11,r11,lr,ASR #12
0001f6  ebab0602          SUB      r6,r11,r2
;;;455    		v5 -= v6;
0001fa  1b9b              SUBS     r3,r3,r6
;;;456    		v4 -= v5;
0001fc  1aed              SUBS     r5,r5,r3
;;;457    
;;;458    		dst[0] = BYTECLIP((v0 + v7) >> 8);	/* Descale the transformed values 8 bits and output */
0001fe  eb0c0b02          ADD      r11,r12,r2
000202  f3cb2b09          UBFX     r11,r11,#8,#10
000206  f8dfe09c          LDR      lr,|L3.676|
00020a  f81eb00b          LDRB     r11,[lr,r11]
00020e  f884b000          STRB     r11,[r4,#0]
;;;459    		dst[7] = BYTECLIP((v0 - v7) >> 8);
000212  ebac0b02          SUB      r11,r12,r2
000216  f3cb2b09          UBFX     r11,r11,#8,#10
00021a  f81eb00b          LDRB     r11,[lr,r11]
00021e  f884b007          STRB     r11,[r4,#7]
;;;460    		dst[1] = BYTECLIP((v1 + v6) >> 8);
000222  eb080b06          ADD      r11,r8,r6
000226  f3cb2b09          UBFX     r11,r11,#8,#10
00022a  f81eb00b          LDRB     r11,[lr,r11]
00022e  f884b001          STRB     r11,[r4,#1]
;;;461    		dst[6] = BYTECLIP((v1 - v6) >> 8);
000232  eba80b06          SUB      r11,r8,r6
000236  f3cb2b09          UBFX     r11,r11,#8,#10
00023a  f81eb00b          LDRB     r11,[lr,r11]
00023e  f884b006          STRB     r11,[r4,#6]
;;;462    		dst[2] = BYTECLIP((v2 + v5) >> 8);
000242  eb090b03          ADD      r11,r9,r3
000246  f3cb2b09          UBFX     r11,r11,#8,#10
00024a  f81eb00b          LDRB     r11,[lr,r11]
00024e  f884b002          STRB     r11,[r4,#2]
;;;463    		dst[5] = BYTECLIP((v2 - v5) >> 8);
000252  eba90b03          SUB      r11,r9,r3
000256  f3cb2b09          UBFX     r11,r11,#8,#10
00025a  f81eb00b          LDRB     r11,[lr,r11]
00025e  f884b005          STRB     r11,[r4,#5]
;;;464    		dst[3] = BYTECLIP((v3 + v4) >> 8);
000262  eb010b05          ADD      r11,r1,r5
000266  f3cb2b09          UBFX     r11,r11,#8,#10
00026a  f81eb00b          LDRB     r11,[lr,r11]
00026e  f884b003          STRB     r11,[r4,#3]
;;;465    		dst[4] = BYTECLIP((v3 - v4) >> 8);
000272  eba10b05          SUB      r11,r1,r5
000276  f3cb2b09          UBFX     r11,r11,#8,#10
00027a  f81eb00b          LDRB     r11,[lr,r11]
00027e  f884b004          STRB     r11,[r4,#4]
;;;466    		dst += 8;
000282  3408              ADDS     r4,r4,#8
;;;467    
;;;468    		src += 8;	/* Next row */
000284  3020              ADDS     r0,r0,#0x20
000286  f8ddb000          LDR      r11,[sp,#0]           ;425
00028a  f10b0b01          ADD      r11,r11,#1            ;425
00028e  f8cdb000          STR      r11,[sp,#0]           ;425
                  |L3.658|
000292  f8ddb000          LDR      r11,[sp,#0]           ;425
000296  f1bb0f08          CMP      r11,#8                ;425
00029a  f4ffaf57          BCC      |L3.332|
;;;469    	}
;;;470    }
00029e  b007              ADD      sp,sp,#0x1c
0002a0  e8bd8ff0          POP      {r4-r11,pc}
;;;471    
                          ENDP

                  |L3.676|
                          DCD      Clip8

                          AREA ||i.create_huffman_tbl||, CODE, READONLY, ALIGN=1

                  create_huffman_tbl PROC
;;;195    static
;;;196    UINT create_huffman_tbl (	/* 0:OK, !0:Failed */
000000  e92d4ff7          PUSH     {r0-r2,r4-r11,lr}
;;;197    	JDEC* jd,				/* Pointer to the decompressor object */
;;;198    	const BYTE* data,		/* Pointer to the packed huffman tables */
;;;199    	UINT ndata				/* Size of input data */
;;;200    )
;;;201    {
000004  b086              SUB      sp,sp,#0x18
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
;;;202    	UINT i, j, b, np, cls, num;
;;;203    	BYTE d, *pb, *pd;
;;;204    	WORD hc, *ph;
;;;205    
;;;206    
;;;207    	while (ndata) {	/* Process all tables in the segment */
00000a  e08e              B        |L4.298|
                  |L4.12|
;;;208    		if (ndata < 17) return JDR_FMT1;	/* Err: wrong data size */
00000c  2e11              CMP      r6,#0x11
00000e  d203              BCS      |L4.24|
000010  2006              MOVS     r0,#6
                  |L4.18|
;;;209    		ndata -= 17;
;;;210    		d = *data++;						/* Get table number and class */
;;;211    		cls = (d >> 4); num = d & 0x0F;		/* class = dc(0)/ac(1), table number = 0/1 */
;;;212    		if (d & 0xEE) return JDR_FMT1;		/* Err: invalid class/number */
;;;213    		pb = alloc_pool(jd, 16);			/* Allocate a memory block for the bit distribution table */
;;;214    		if (!pb) return JDR_MEM1;			/* Err: not enough memory */
;;;215    		jd->huffbits[num][cls] = pb;
;;;216    		for (np = i = 0; i < 16; i++) {		/* Load number of patterns for 1 to 16-bit code */
;;;217    			pb[i] = b = *data++;
;;;218    			np += b;	/* Get sum of code words for each code */
;;;219    		}
;;;220    
;;;221    		ph = alloc_pool(jd, np * sizeof (WORD));/* Allocate a memory block for the code word table */
;;;222    		if (!ph) return JDR_MEM1;			/* Err: not enough memory */
;;;223    		jd->huffcode[num][cls] = ph;
;;;224    		hc = 0;
;;;225    		for (j = i = 0; i < 16; i++) {		/* Re-build huffman code word table */
;;;226    			b = pb[i];
;;;227    			while (b--) ph[j++] = hc++;
;;;228    			hc <<= 1;
;;;229    		}
;;;230    
;;;231    		if (ndata < np) return JDR_FMT1;	/* Err: wrong data size */
;;;232    		ndata -= np;
;;;233    		pd = alloc_pool(jd, np);			/* Allocate a memory block for the decoded data */
;;;234    		if (!pd) return JDR_MEM1;			/* Err: not enough memory */
;;;235    		jd->huffdata[num][cls] = pd;
;;;236    		for (i = 0; i < np; i++) {			/* Load decoded data corresponds to each code ward */
;;;237    			d = *data++;
;;;238    			if (!cls && d > 11) return JDR_FMT1;
;;;239    			*pd++ = d;
;;;240    		}
;;;241    	}
;;;242    
;;;243    	return JDR_OK;
;;;244    }
000012  b009              ADD      sp,sp,#0x24
000014  e8bd8ff0          POP      {r4-r11,pc}
                  |L4.24|
000018  3e11              SUBS     r6,r6,#0x11           ;209
00001a  f815ab01          LDRB     r10,[r5],#1           ;210
00001e  ea4f192a          ASR      r9,r10,#4             ;211
000022  f00a000f          AND      r0,r10,#0xf           ;211
000026  9003              STR      r0,[sp,#0xc]          ;211
000028  f00a00ee          AND      r0,r10,#0xee          ;212
00002c  b108              CBZ      r0,|L4.50|
00002e  2006              MOVS     r0,#6                 ;212
000030  e7ef              B        |L4.18|
                  |L4.50|
000032  2110              MOVS     r1,#0x10              ;213
000034  9806              LDR      r0,[sp,#0x18]         ;213
000036  f7fffffe          BL       alloc_pool
00003a  4680              MOV      r8,r0                 ;213
00003c  f1b80f00          CMP      r8,#0                 ;214
000040  d101              BNE      |L4.70|
000042  2003              MOVS     r0,#3                 ;214
000044  e7e5              B        |L4.18|
                  |L4.70|
000046  9806              LDR      r0,[sp,#0x18]         ;215
000048  3024              ADDS     r0,r0,#0x24           ;215
00004a  9903              LDR      r1,[sp,#0xc]          ;215
00004c  eb0000c1          ADD      r0,r0,r1,LSL #3       ;215
000050  f8408029          STR      r8,[r0,r9,LSL #2]     ;215
000054  2000              MOVS     r0,#0                 ;216
000056  4604              MOV      r4,r0                 ;216
000058  4607              MOV      r7,r0                 ;216
00005a  e007              B        |L4.108|
                  |L4.92|
00005c  f8150b01          LDRB     r0,[r5],#1            ;217
000060  9004              STR      r0,[sp,#0x10]         ;217
000062  f8080004          STRB     r0,[r8,r4]            ;217
000066  9804              LDR      r0,[sp,#0x10]         ;218
000068  4407              ADD      r7,r7,r0              ;218
00006a  1c64              ADDS     r4,r4,#1              ;216
                  |L4.108|
00006c  2c10              CMP      r4,#0x10              ;216
00006e  d3f5              BCC      |L4.92|
000070  0079              LSLS     r1,r7,#1              ;221
000072  9806              LDR      r0,[sp,#0x18]         ;221
000074  f7fffffe          BL       alloc_pool
000078  4683              MOV      r11,r0                ;221
00007a  f1bb0f00          CMP      r11,#0                ;222
00007e  d101              BNE      |L4.132|
000080  2003              MOVS     r0,#3                 ;222
000082  e7c6              B        |L4.18|
                  |L4.132|
000084  9806              LDR      r0,[sp,#0x18]         ;223
000086  3034              ADDS     r0,r0,#0x34           ;223
000088  9903              LDR      r1,[sp,#0xc]          ;223
00008a  eb0000c1          ADD      r0,r0,r1,LSL #3       ;223
00008e  f840b029          STR      r11,[r0,r9,LSL #2]    ;223
000092  2000              MOVS     r0,#0                 ;224
000094  9001              STR      r0,[sp,#4]            ;224
000096  4604              MOV      r4,r0                 ;225
000098  9005              STR      r0,[sp,#0x14]         ;225
00009a  e019              B        |L4.208|
                  |L4.156|
00009c  f8180004          LDRB     r0,[r8,r4]            ;226
0000a0  9004              STR      r0,[sp,#0x10]         ;226
0000a2  e009              B        |L4.184|
                  |L4.164|
0000a4  9805              LDR      r0,[sp,#0x14]         ;227
0000a6  1c42              ADDS     r2,r0,#1              ;227
0000a8  9901              LDR      r1,[sp,#4]            ;227
0000aa  9205              STR      r2,[sp,#0x14]         ;227
0000ac  f82b1010          STRH     r1,[r11,r0,LSL #1]    ;227
0000b0  9801              LDR      r0,[sp,#4]            ;227
0000b2  1c40              ADDS     r0,r0,#1              ;227
0000b4  b280              UXTH     r0,r0                 ;227
0000b6  9001              STR      r0,[sp,#4]            ;227
                  |L4.184|
0000b8  9804              LDR      r0,[sp,#0x10]         ;227
0000ba  1e41              SUBS     r1,r0,#1              ;227
0000bc  9104              STR      r1,[sp,#0x10]         ;227
0000be  2800              CMP      r0,#0                 ;227
0000c0  d1f0              BNE      |L4.164|
0000c2  f64f71ff          MOV      r1,#0xffff            ;228
0000c6  9801              LDR      r0,[sp,#4]            ;228
0000c8  ea010040          AND      r0,r1,r0,LSL #1       ;228
0000cc  9001              STR      r0,[sp,#4]            ;228
0000ce  1c64              ADDS     r4,r4,#1              ;225
                  |L4.208|
0000d0  2c10              CMP      r4,#0x10              ;225
0000d2  d3e3              BCC      |L4.156|
0000d4  42be              CMP      r6,r7                 ;231
0000d6  d201              BCS      |L4.220|
0000d8  2006              MOVS     r0,#6                 ;231
0000da  e79a              B        |L4.18|
                  |L4.220|
0000dc  1bf6              SUBS     r6,r6,r7              ;232
0000de  4639              MOV      r1,r7                 ;233
0000e0  9806              LDR      r0,[sp,#0x18]         ;233
0000e2  f7fffffe          BL       alloc_pool
0000e6  9002              STR      r0,[sp,#8]            ;233
0000e8  9802              LDR      r0,[sp,#8]            ;234
0000ea  b908              CBNZ     r0,|L4.240|
0000ec  2003              MOVS     r0,#3                 ;234
0000ee  e790              B        |L4.18|
                  |L4.240|
0000f0  9806              LDR      r0,[sp,#0x18]         ;235
0000f2  3044              ADDS     r0,r0,#0x44           ;235
0000f4  e9dd1202          LDRD     r1,r2,[sp,#8]         ;235
0000f8  eb0000c2          ADD      r0,r0,r2,LSL #3       ;235
0000fc  f8401029          STR      r1,[r0,r9,LSL #2]     ;235
000100  2400              MOVS     r4,#0                 ;236
000102  e010              B        |L4.294|
                  |L4.260|
000104  f815ab01          LDRB     r10,[r5],#1           ;237
000108  f1b90f00          CMP      r9,#0                 ;238
00010c  d104              BNE      |L4.280|
00010e  f1ba0f0b          CMP      r10,#0xb              ;238
000112  dd01              BLE      |L4.280|
000114  2006              MOVS     r0,#6                 ;238
000116  e77c              B        |L4.18|
                  |L4.280|
000118  9802              LDR      r0,[sp,#8]            ;239
00011a  f880a000          STRB     r10,[r0,#0]           ;239
00011e  9802              LDR      r0,[sp,#8]            ;239
000120  1c40              ADDS     r0,r0,#1              ;239
000122  9002              STR      r0,[sp,#8]            ;239
000124  1c64              ADDS     r4,r4,#1              ;236
                  |L4.294|
000126  42bc              CMP      r4,r7                 ;236
000128  d3ec              BCC      |L4.260|
                  |L4.298|
00012a  2e00              CMP      r6,#0                 ;207
00012c  f47faf6e          BNE      |L4.12|
000130  2000              MOVS     r0,#0                 ;243
000132  e76e              B        |L4.18|
;;;245    
                          ENDP


                          AREA ||i.create_qt_tbl||, CODE, READONLY, ALIGN=2

                  create_qt_tbl PROC
;;;158    static
;;;159    UINT create_qt_tbl (	/* 0:OK, !0:Failed */
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;160    	JDEC* jd,			/* Pointer to the decompressor object */
;;;161    	const BYTE* data,	/* Pointer to the quantizer tables */
;;;162    	UINT ndata			/* Size of input data */
;;;163    )
;;;164    {
000004  4682              MOV      r10,r0
000006  460c              MOV      r4,r1
000008  4616              MOV      r6,r2
;;;165    	UINT i;
;;;166    	BYTE d, z;
;;;167    	LONG *pb;
;;;168    
;;;169    
;;;170    	while (ndata) {	/* Process all tables in the segment */
00000a  e02b              B        |L5.100|
                  |L5.12|
;;;171    		if (ndata < 65) return JDR_FMT1;	/* Err: table size is unaligned */
00000c  2e41              CMP      r6,#0x41
00000e  d202              BCS      |L5.22|
000010  2006              MOVS     r0,#6
                  |L5.18|
;;;172    		ndata -= 65;
;;;173    		d = *data++;							/* Get table property */
;;;174    		if (d & 0xF0) return JDR_FMT1;			/* Err: not 8-bit resolution */
;;;175    		i = d & 3;								/* Get table ID */
;;;176    		pb = alloc_pool(jd, 64 * sizeof (LONG));/* Allocate a memory block for the table */
;;;177    		if (!pb) return JDR_MEM1;				/* Err: not enough memory */
;;;178    		jd->qttbl[i] = pb;						/* Register the table */
;;;179    		for (i = 0; i < 64; i++) {				/* Load the table */
;;;180    			z = ZIG(i);							/* Zigzag-order to raster-order conversion */
;;;181    			pb[z] = (LONG)((DWORD)*data++ * IPSF(z));	/* Apply scale factor of Arai algorithm to the de-quantizers */
;;;182    		}
;;;183    	}
;;;184    
;;;185    	return JDR_OK;
;;;186    }
000012  e8bd87f0          POP      {r4-r10,pc}
                  |L5.22|
000016  3e41              SUBS     r6,r6,#0x41           ;172
000018  f8148b01          LDRB     r8,[r4],#1            ;173
00001c  f00800f0          AND      r0,r8,#0xf0           ;174
000020  b108              CBZ      r0,|L5.38|
000022  2006              MOVS     r0,#6                 ;174
000024  e7f5              B        |L5.18|
                  |L5.38|
000026  f0080703          AND      r7,r8,#3              ;175
00002a  f44f7180          MOV      r1,#0x100             ;176
00002e  4650              MOV      r0,r10                ;176
000030  f7fffffe          BL       alloc_pool
000034  4605              MOV      r5,r0                 ;176
000036  b90d              CBNZ     r5,|L5.60|
000038  2003              MOVS     r0,#3                 ;177
00003a  e7ea              B        |L5.18|
                  |L5.60|
00003c  f10a0054          ADD      r0,r10,#0x54          ;178
000040  f8405027          STR      r5,[r0,r7,LSL #2]     ;178
000044  2700              MOVS     r7,#0                 ;179
000046  e00b              B        |L5.96|
                  |L5.72|
000048  4808              LDR      r0,|L5.108|
00004a  f8109007          LDRB     r9,[r0,r7]            ;180
00004e  f8140b01          LDRB     r0,[r4],#1            ;181
000052  4907              LDR      r1,|L5.112|
000054  f8311019          LDRH     r1,[r1,r9,LSL #1]     ;181
000058  4348              MULS     r0,r1,r0              ;181
00005a  f8450029          STR      r0,[r5,r9,LSL #2]     ;181
00005e  1c7f              ADDS     r7,r7,#1              ;179
                  |L5.96|
000060  2f40              CMP      r7,#0x40              ;179
000062  d3f1              BCC      |L5.72|
                  |L5.100|
000064  2e00              CMP      r6,#0                 ;170
000066  d1d1              BNE      |L5.12|
000068  2000              MOVS     r0,#0                 ;185
00006a  e7d2              B        |L5.18|
;;;187    
                          ENDP

                  |L5.108|
                          DCD      Zig
                  |L5.112|
                          DCD      Ipsf

                          AREA ||i.huffext||, CODE, READONLY, ALIGN=1

                  huffext PROC
;;;304    static
;;;305    INT huffext (			/* >=0: decoded data, <0: error code */
000000  e92d5fff          PUSH     {r0-r12,lr}
;;;306    	JDEC* jd,			/* Pointer to the decompressor object */
;;;307    	const BYTE* hbits,	/* Pointer to the bit distribution table */
;;;308    	const WORD* hcode,	/* Pointer to the code word table */
;;;309    	const BYTE* hdata	/* Pointer to the data table */
;;;310    )
;;;311    {
000004  4604              MOV      r4,r0
000006  4688              MOV      r8,r1
000008  4691              MOV      r9,r2
00000a  469a              MOV      r10,r3
;;;312    	BYTE msk, s, *dp;
;;;313    	UINT dc, v, f, bl, nd;
;;;314    
;;;315    
;;;316    	msk = jd->dmsk; dc = jd->dctr; dp = jd->dptr;	/* Bit mask, number of data available, read ptr */
00000c  7b26              LDRB     r6,[r4,#0xc]
00000e  6827              LDR      r7,[r4,#0]
000010  6865              LDR      r5,[r4,#4]
;;;317    	s = *dp; v = f = 0;
000012  7828              LDRB     r0,[r5,#0]
000014  9003              STR      r0,[sp,#0xc]
000016  2000              MOVS     r0,#0
000018  4683              MOV      r11,r0
00001a  9002              STR      r0,[sp,#8]
;;;318    	bl = 16;	/* Max code length */
00001c  2010              MOVS     r0,#0x10
00001e  9001              STR      r0,[sp,#4]
;;;319    	do {
000020  bf00              NOP      
                  |L6.34|
;;;320    		if (!msk) {		/* Next byte? */
000022  bb36              CBNZ     r6,|L6.114|
;;;321    			if (!dc) {	/* No input data is available, re-fill input buffer */
000024  b96f              CBNZ     r7,|L6.66|
;;;322    				dp = jd->inbuf;	/* Top of input buffer */
000026  68a5              LDR      r5,[r4,#8]
;;;323    				dc = jd->infunc(jd, dp, JD_SZBUF);
000028  f44f6280          MOV      r2,#0x400
00002c  4629              MOV      r1,r5
00002e  4620              MOV      r0,r4
000030  6f63              LDR      r3,[r4,#0x74]
000032  4798              BLX      r3
000034  4607              MOV      r7,r0
;;;324    				if (!dc) return 0 - (INT)JDR_INP;	/* Err: read error or wrong stream termination */
000036  b92f              CBNZ     r7,|L6.68|
000038  f06f0001          MVN      r0,#1
                  |L6.60|
;;;325    			} else {
;;;326    				dp++;	/* Next data ptr */
;;;327    			}
;;;328    			dc--;		/* Decrement number of available bytes */
;;;329    			if (f) {		/* In flag sequence? */
;;;330    				f = 0;		/* Exit flag sequence */
;;;331    				if (*dp != 0)
;;;332    					return 0 - (INT)JDR_FMT1;	/* Err: unexpected flag is detected (may be collapted data) */
;;;333    				*dp = s = 0xFF;			/* The flag is a data 0xFF */
;;;334    			} else {
;;;335    				s = *dp;				/* Get next data byte */
;;;336    				if (s == 0xFF) {		/* Is start of flag sequence? */
;;;337    					f = 1; continue;	/* Enter flag sequence, get trailing byte */
;;;338    				}
;;;339    			}
;;;340    			msk = 0x80;		/* Read from MSB */
;;;341    		}
;;;342    		v <<= 1;	/* Get a bit */
;;;343    		if (s & msk) v++;
;;;344    		msk >>= 1;
;;;345    
;;;346    		for (nd = *hbits++; nd; nd--) {	/* Search the code word in this bit length */
;;;347    			if (v == *hcode++) {		/* Matched? */
;;;348    				jd->dmsk = msk; jd->dctr = dc; jd->dptr = dp;
;;;349    				return *hdata;			/* Return the decoded data */
;;;350    			}
;;;351    			hdata++;
;;;352    		}
;;;353    		bl--;
;;;354    	} while (bl);
;;;355    
;;;356    	return 0 - (INT)JDR_FMT1;	/* Err: code not found (may be collapted data) */
;;;357    }
00003c  b004              ADD      sp,sp,#0x10
00003e  e8bd9ff0          POP      {r4-r12,pc}
                  |L6.66|
000042  1c6d              ADDS     r5,r5,#1              ;326
                  |L6.68|
000044  1e7f              SUBS     r7,r7,#1              ;328
000046  9802              LDR      r0,[sp,#8]            ;329
000048  b150              CBZ      r0,|L6.96|
00004a  2000              MOVS     r0,#0                 ;330
00004c  9002              STR      r0,[sp,#8]            ;330
00004e  7828              LDRB     r0,[r5,#0]            ;331
000050  b110              CBZ      r0,|L6.88|
000052  f06f0005          MVN      r0,#5                 ;332
000056  e7f1              B        |L6.60|
                  |L6.88|
000058  20ff              MOVS     r0,#0xff              ;333
00005a  9003              STR      r0,[sp,#0xc]          ;333
00005c  7028              STRB     r0,[r5,#0]            ;333
00005e  e007              B        |L6.112|
                  |L6.96|
000060  7828              LDRB     r0,[r5,#0]            ;335
000062  9003              STR      r0,[sp,#0xc]          ;335
000064  9803              LDR      r0,[sp,#0xc]          ;336
000066  28ff              CMP      r0,#0xff              ;336
000068  d102              BNE      |L6.112|
00006a  2001              MOVS     r0,#1                 ;337
00006c  9002              STR      r0,[sp,#8]            ;337
00006e  e022              B        |L6.182|
                  |L6.112|
000070  2680              MOVS     r6,#0x80              ;340
                  |L6.114|
000072  ea4f0b4b          LSL      r11,r11,#1            ;342
000076  9803              LDR      r0,[sp,#0xc]          ;343
000078  4030              ANDS     r0,r0,r6              ;343
00007a  b108              CBZ      r0,|L6.128|
00007c  f10b0b01          ADD      r11,r11,#1            ;343
                  |L6.128|
000080  1076              ASRS     r6,r6,#1              ;344
000082  f8180b01          LDRB     r0,[r8],#1            ;346
000086  9000              STR      r0,[sp,#0]            ;346
000088  e00e              B        |L6.168|
                  |L6.138|
00008a  f8391b02          LDRH     r1,[r9],#2            ;347
00008e  4559              CMP      r1,r11                ;347
000090  d105              BNE      |L6.158|
000092  7326              STRB     r6,[r4,#0xc]          ;348
000094  6027              STR      r7,[r4,#0]            ;348
000096  6065              STR      r5,[r4,#4]            ;348
000098  f89a0000          LDRB     r0,[r10,#0]           ;349
00009c  e7ce              B        |L6.60|
                  |L6.158|
00009e  f10a0a01          ADD      r10,r10,#1            ;351
0000a2  9800              LDR      r0,[sp,#0]            ;346
0000a4  1e40              SUBS     r0,r0,#1              ;346
0000a6  9000              STR      r0,[sp,#0]            ;346
                  |L6.168|
0000a8  9800              LDR      r0,[sp,#0]            ;346
0000aa  2800              CMP      r0,#0                 ;346
0000ac  d1ed              BNE      |L6.138|
0000ae  9801              LDR      r0,[sp,#4]            ;353
0000b0  1e40              SUBS     r0,r0,#1              ;353
0000b2  9001              STR      r0,[sp,#4]            ;353
0000b4  bf00              NOP                            ;337
                  |L6.182|
0000b6  9801              LDR      r0,[sp,#4]            ;354
0000b8  2800              CMP      r0,#0                 ;354
0000ba  d1b2              BNE      |L6.34|
0000bc  1f80              SUBS     r0,r0,#6              ;356
0000be  e7bd              B        |L6.60|
;;;358    
                          ENDP


                          AREA ||i.jd_decomp||, CODE, READONLY, ALIGN=1

                  jd_decomp PROC
;;;929    
;;;930    JRESULT jd_decomp (
000000  e92d4ff7          PUSH     {r0-r2,r4-r11,lr}
;;;931    	JDEC* jd,								/* Initialized decompression object */
;;;932    	UINT (*outfunc)(JDEC*, void*, JRECT*),	/* RGB output function */
;;;933    	BYTE scale								/* Output de-scaling factor (0 to 3) */
;;;934    )
;;;935    {
000004  b082              SUB      sp,sp,#8
000006  4604              MOV      r4,r0
000008  4617              MOV      r7,r2
;;;936    	UINT x, y, mx, my;
;;;937    	WORD rst, rsc;
;;;938    	JRESULT rc;
;;;939    
;;;940    
;;;941    	if (scale > (JD_USE_SCALE ? 3 : 0)) return JDR_PAR;
00000a  2f03              CMP      r7,#3
00000c  dd03              BLE      |L7.22|
00000e  2005              MOVS     r0,#5
                  |L7.16|
;;;942    	jd->scale = scale;
;;;943    
;;;944    	mx = jd->msx * 8; my = jd->msy * 8;			/* Size of the MCU (pixel) */
;;;945    
;;;946    	jd->dcv[2] = jd->dcv[1] = jd->dcv[0] = 0;	/* Initialize DC values */
;;;947    	rst = rsc = 0;
;;;948    
;;;949    	rc = JDR_OK;
;;;950    	for (y = 0; y < jd->height; y += my) {		/* Vertical loop of MCUs */
;;;951    		for (x = 0; x < jd->width; x += mx) {	/* Horizontal loop of MCUs */
;;;952    			if (jd->nrst && rst++ == jd->nrst) {	/* Process restart interval if enabled */
;;;953    				rc = restart(jd, rsc++);
;;;954    				if (rc != JDR_OK) return rc;
;;;955    				rst = 1;
;;;956    			}
;;;957    			rc = mcu_load(jd);					/* Load an MCU (decompress huffman coded stream and apply IDCT) */
;;;958    			if (rc != JDR_OK) return rc;
;;;959    			rc = mcu_output(jd, outfunc, x, y);	/* Output the MCU (color space conversion, scaling and output) */
;;;960    			if (rc != JDR_OK) return rc;
;;;961    		}
;;;962    	}
;;;963    
;;;964    	return rc;
;;;965    }
000010  b005              ADD      sp,sp,#0x14
000012  e8bd8ff0          POP      {r4-r11,pc}
                  |L7.22|
000016  7367              STRB     r7,[r4,#0xd]          ;942
000018  7ba0              LDRB     r0,[r4,#0xe]          ;944
00001a  ea4f09c0          LSL      r9,r0,#3              ;944
00001e  7be0              LDRB     r0,[r4,#0xf]          ;944
000020  ea4f0ac0          LSL      r10,r0,#3             ;944
000024  2100              MOVS     r1,#0                 ;946
000026  82a1              STRH     r1,[r4,#0x14]         ;946
000028  82e1              STRH     r1,[r4,#0x16]         ;946
00002a  8321              STRH     r1,[r4,#0x18]         ;946
00002c  468b              MOV      r11,r1                ;947
00002e  f8cdb004          STR      r11,[sp,#4]           ;947
000032  2500              MOVS     r5,#0                 ;949
000034  2600              MOVS     r6,#0                 ;950
000036  e02f              B        |L7.152|
                  |L7.56|
000038  f04f0800          MOV      r8,#0                 ;951
00003c  e028              B        |L7.144|
                  |L7.62|
00003e  8b60              LDRH     r0,[r4,#0x1a]         ;952
000040  b1a0              CBZ      r0,|L7.108|
000042  4658              MOV      r0,r11                ;952
000044  1c41              ADDS     r1,r0,#1              ;952
000046  fa1ffb81          UXTH     r11,r1                ;952
00004a  8b61              LDRH     r1,[r4,#0x1a]         ;952
00004c  4288              CMP      r0,r1                 ;952
00004e  d10d              BNE      |L7.108|
000050  9801              LDR      r0,[sp,#4]            ;953
000052  1c42              ADDS     r2,r0,#1              ;953
000054  b292              UXTH     r2,r2                 ;953
000056  4601              MOV      r1,r0                 ;953
000058  4620              MOV      r0,r4                 ;953
00005a  9201              STR      r2,[sp,#4]            ;953
00005c  f7fffffe          BL       restart
000060  4605              MOV      r5,r0                 ;953
000062  b10d              CBZ      r5,|L7.104|
000064  4628              MOV      r0,r5                 ;954
000066  e7d3              B        |L7.16|
                  |L7.104|
000068  f04f0b01          MOV      r11,#1                ;955
                  |L7.108|
00006c  4620              MOV      r0,r4                 ;957
00006e  f7fffffe          BL       mcu_load
000072  4605              MOV      r5,r0                 ;957
000074  b10d              CBZ      r5,|L7.122|
000076  4628              MOV      r0,r5                 ;958
000078  e7ca              B        |L7.16|
                  |L7.122|
00007a  4633              MOV      r3,r6                 ;959
00007c  4642              MOV      r2,r8                 ;959
00007e  4620              MOV      r0,r4                 ;959
000080  9903              LDR      r1,[sp,#0xc]          ;959
000082  f7fffffe          BL       mcu_output
000086  4605              MOV      r5,r0                 ;959
000088  b10d              CBZ      r5,|L7.142|
00008a  4628              MOV      r0,r5                 ;960
00008c  e7c0              B        |L7.16|
                  |L7.142|
00008e  44c8              ADD      r8,r8,r9              ;951
                  |L7.144|
000090  69e0              LDR      r0,[r4,#0x1c]         ;951
000092  4540              CMP      r0,r8                 ;951
000094  d8d3              BHI      |L7.62|
000096  4456              ADD      r6,r6,r10             ;950
                  |L7.152|
000098  6a20              LDR      r0,[r4,#0x20]         ;950
00009a  42b0              CMP      r0,r6                 ;950
00009c  d8cc              BHI      |L7.56|
00009e  4628              MOV      r0,r5                 ;964
0000a0  e7b6              B        |L7.16|
;;;966    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                          ENDP


                          AREA ||i.jd_prepare||, CODE, READONLY, ALIGN=1

                  jd_prepare PROC
;;;758    
;;;759    JRESULT jd_prepare (
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;760    	JDEC* jd,			/* Blank decompressor object */
;;;761    	UINT (*infunc)(JDEC*, BYTE*, UINT),	/* JPEG strem input function */
;;;762    	void* pool,			/* Working buffer for the decompression session */
;;;763    	UINT sz_pool,		/* Size of working buffer */
;;;764    	void* dev			/* I/O device identifier for the session */
;;;765    )
;;;766    {
000004  b083              SUB      sp,sp,#0xc
000006  4604              MOV      r4,r0
;;;767    	BYTE *seg, b;
;;;768    	WORD marker;
;;;769    	DWORD ofs;
;;;770    	UINT n, i, j, len;
;;;771    	JRESULT rc;
;;;772    
;;;773    
;;;774    	if (!pool) return JDR_PAR;
000008  9805              LDR      r0,[sp,#0x14]
00000a  b918              CBNZ     r0,|L8.20|
00000c  2005              MOVS     r0,#5
                  |L8.14|
;;;775    
;;;776    	jd->pool = pool;		/* Work memroy */
;;;777    	jd->sz_pool = sz_pool;	/* Size of given work memory */
;;;778    	jd->infunc = infunc;	/* Stream input function */
;;;779    	jd->device = dev;		/* I/O device identifier */
;;;780    	jd->nrst = 0;			/* No restart interval (default) */
;;;781    
;;;782    	for (i = 0; i < 2; i++) {	/* Nulls pointers */
;;;783    		for (j = 0; j < 2; j++) {
;;;784    			jd->huffbits[i][j] = 0;
;;;785    			jd->huffcode[i][j] = 0;
;;;786    			jd->huffdata[i][j] = 0;
;;;787    		}
;;;788    	}
;;;789    	for (i = 0; i < 4; i++) jd->qttbl[i] = 0;
;;;790    
;;;791    	jd->inbuf = seg = alloc_pool(jd, JD_SZBUF);		/* Allocate stream input buffer */
;;;792    	if (!seg) return JDR_MEM1;
;;;793    
;;;794    	if (jd->infunc(jd, seg, 2) != 2) return JDR_INP;/* Check SOI marker */
;;;795    	if (LDB_WORD(seg) != 0xFFD8) return JDR_FMT1;	/* Err: SOI is not detected */
;;;796    	ofs = 2;
;;;797    
;;;798    	for (;;) {
;;;799    		/* Get a JPEG marker */
;;;800    		if (jd->infunc(jd, seg, 4) != 4) return JDR_INP;
;;;801    		marker = LDB_WORD(seg);		/* Marker */
;;;802    		len = LDB_WORD(seg + 2);	/* Length field */
;;;803    		if (len <= 2 || (marker >> 8) != 0xFF) return JDR_FMT1;
;;;804    		len -= 2;		/* Content size excluding length field */
;;;805    		ofs += 4 + len;	/* Number of bytes loaded */
;;;806    
;;;807    		switch (marker & 0xFF) {
;;;808    		case 0xC0:	/* SOF0 (baseline JPEG) */
;;;809    			/* Load segment data */
;;;810    			if (len > JD_SZBUF) return JDR_MEM2;
;;;811    			if (jd->infunc(jd, seg, len) != len) return JDR_INP;
;;;812    
;;;813    			jd->width = LDB_WORD(seg+3);		/* Image width in unit of pixel */
;;;814    			jd->height = LDB_WORD(seg+1);		/* Image height in unit of pixel */
;;;815    			if (seg[5] != 3) return JDR_FMT3;	/* Err: Supports only Y/Cb/Cr format */
;;;816    
;;;817    			/* Check three image components */
;;;818    			for (i = 0; i < 3; i++) {	
;;;819    				b = seg[7 + 3 * i];							/* Get sampling factor */
;;;820    				if (!i) {	/* Y component */
;;;821    					if (b != 0x11 && b != 0x22 && b != 0x21)/* Check sampling factor */
;;;822    						return JDR_FMT3;					/* Err: Supports only 4:4:4, 4:2:0 or 4:2:2 */
;;;823    					jd->msx = b >> 4; jd->msy = b & 15;		/* Size of MCU [blocks] */
;;;824    				} else {	/* Cb/Cr component */
;;;825    					if (b != 0x11) return JDR_FMT3;			/* Err: Sampling factor of Cr/Cb must be 1 */
;;;826    				}
;;;827    				b = seg[8 + 3 * i];							/* Get dequantizer table ID for this component */
;;;828    				if (b > 3) return JDR_FMT3;					/* Err: Invalid ID */
;;;829    				jd->qtid[i] = b;
;;;830    			}
;;;831    			break;
;;;832    
;;;833    		case 0xDD:	/* DRI */
;;;834    			/* Load segment data */
;;;835    			if (len > JD_SZBUF) return JDR_MEM2;
;;;836    			if (jd->infunc(jd, seg, len) != len) return JDR_INP;
;;;837    
;;;838    			/* Get restart interval (MCUs) */
;;;839    			jd->nrst = LDB_WORD(seg);
;;;840    			break;
;;;841    
;;;842    		case 0xC4:	/* DHT */
;;;843    			/* Load segment data */
;;;844    			if (len > JD_SZBUF) return JDR_MEM2;
;;;845    			if (jd->infunc(jd, seg, len) != len) return JDR_INP;
;;;846    
;;;847    			/* Create huffman tables */
;;;848    			rc = (JRESULT)create_huffman_tbl(jd, seg, len);
;;;849    			if (rc) return rc;
;;;850    			break;
;;;851    
;;;852    		case 0xDB:	/* DQT */
;;;853    			/* Load segment data */
;;;854    			if (len > JD_SZBUF) return JDR_MEM2;
;;;855    			if (jd->infunc(jd, seg, len) != len) return JDR_INP;
;;;856    
;;;857    			/* Create de-quantizer tables */
;;;858    			rc = (JRESULT)create_qt_tbl(jd, seg, len);
;;;859    			if (rc) return rc;
;;;860    			break;
;;;861    
;;;862    		case 0xDA:	/* SOS */
;;;863    			/* Load segment data */
;;;864    			if (len > JD_SZBUF) return JDR_MEM2;
;;;865    			if (jd->infunc(jd, seg, len) != len) return JDR_INP;
;;;866    
;;;867    			if (!jd->width || !jd->height) return JDR_FMT1;	/* Err: Invalid image size */
;;;868    
;;;869    			if (seg[0] != 3) return JDR_FMT3;				/* Err: Supports only three color components format */
;;;870    
;;;871    			/* Check if all tables corresponding to each components have been loaded */
;;;872    			for (i = 0; i < 3; i++) {
;;;873    				b = seg[2 + 2 * i];	/* Get huffman table ID */
;;;874    				if (b != 0x00 && b != 0x11)	return JDR_FMT3;	/* Err: Different table number for DC/AC element */
;;;875    				b = i ? 1 : 0;
;;;876    				if (!jd->huffbits[b][0] || !jd->huffbits[b][1])	/* Check huffman table for this component */
;;;877    					return JDR_FMT1;							/* Err: Huffman table not loaded */
;;;878    				if (!jd->qttbl[jd->qtid[i]]) return JDR_FMT1;	/* Err: Dequantizer table not loaded */
;;;879    			}
;;;880    
;;;881    			/* Allocate working buffer for MCU and RGB */
;;;882    			n = jd->msy * jd->msx;						/* Number of Y blocks in the MCU */
;;;883    			if (!n) return JDR_FMT1;					/* Err: SOF0 has not been loaded */
;;;884    			len = n * 64 * 2 + 64;						/* Allocate buffer for IDCT and RGB output */
;;;885    			if (len < 256) len = 256;					/* but at least 256 byte is required for IDCT */
;;;886    			jd->workbuf = alloc_pool(jd, len);			/* and it may occupy a part of following MCU working buffer for RGB output */
;;;887    			if (!jd->workbuf) return JDR_MEM1;			/* Err: not enough memory */
;;;888    			jd->mcubuf = alloc_pool(jd, (n + 2) * 64);	/* Allocate MCU working buffer */
;;;889    			if (!jd->mcubuf) return JDR_MEM1;			/* Err: not enough memory */
;;;890    
;;;891    			/* Pre-load the JPEG data to extract it from the bit stream */
;;;892    			jd->dptr = seg; jd->dctr = 0; jd->dmsk = 0;	/* Prepare to read bit stream */
;;;893    			if (ofs %= JD_SZBUF) {						/* Align read offset to JD_SZBUF */
;;;894    				jd->dctr = jd->infunc(jd, seg + ofs, JD_SZBUF - (UINT)ofs);
;;;895    				jd->dptr = seg + ofs - 1;
;;;896    			}
;;;897    
;;;898    			return JDR_OK;		/* Initialization succeeded. Ready to decompress the JPEG image. */
;;;899    
;;;900    		case 0xC1:	/* SOF1 */
;;;901    		case 0xC2:	/* SOF2 */
;;;902    		case 0xC3:	/* SOF3 */
;;;903    		case 0xC5:	/* SOF5 */
;;;904    		case 0xC6:	/* SOF6 */
;;;905    		case 0xC7:	/* SOF7 */
;;;906    		case 0xC9:	/* SOF9 */
;;;907    		case 0xCA:	/* SOF10 */
;;;908    		case 0xCB:	/* SOF11 */
;;;909    		case 0xCD:	/* SOF13 */
;;;910    		case 0xCE:	/* SOF14 */
;;;911    		case 0xCF:	/* SOF15 */
;;;912    		case 0xD9:	/* EOI */
;;;913    			return JDR_FMT3;	/* Unsuppoted JPEG standard (may be progressive JPEG) */
;;;914    
;;;915    		default:	/* Unknown segment (comment, exif or etc..) */
;;;916    			/* Skip segment data */
;;;917    			if (jd->infunc(jd, 0, len) != len)	/* Null pointer specifies to skip bytes of stream */
;;;918    				return JDR_INP;
;;;919    		}
;;;920    	}
;;;921    }
00000e  b007              ADD      sp,sp,#0x1c
000010  e8bd8ff0          POP      {r4-r11,pc}
                  |L8.20|
000014  9805              LDR      r0,[sp,#0x14]         ;776
000016  66e0              STR      r0,[r4,#0x6c]         ;776
000018  9806              LDR      r0,[sp,#0x18]         ;777
00001a  6720              STR      r0,[r4,#0x70]         ;777
00001c  9804              LDR      r0,[sp,#0x10]         ;778
00001e  6760              STR      r0,[r4,#0x74]         ;778
000020  9810              LDR      r0,[sp,#0x40]         ;779
000022  67a0              STR      r0,[r4,#0x78]         ;779
000024  2000              MOVS     r0,#0                 ;780
000026  8360              STRH     r0,[r4,#0x1a]         ;780
000028  2600              MOVS     r6,#0                 ;782
00002a  e01b              B        |L8.100|
                  |L8.44|
00002c  f04f0a00          MOV      r10,#0                ;783
000030  e014              B        |L8.92|
                  |L8.50|
000032  2100              MOVS     r1,#0                 ;784
000034  f1040024          ADD      r0,r4,#0x24           ;784
000038  eb0000c6          ADD      r0,r0,r6,LSL #3       ;784
00003c  f840102a          STR      r1,[r0,r10,LSL #2]    ;784
000040  f1040034          ADD      r0,r4,#0x34           ;785
000044  eb0000c6          ADD      r0,r0,r6,LSL #3       ;785
000048  f840102a          STR      r1,[r0,r10,LSL #2]    ;785
00004c  f1040044          ADD      r0,r4,#0x44           ;786
000050  eb0000c6          ADD      r0,r0,r6,LSL #3       ;786
000054  f840102a          STR      r1,[r0,r10,LSL #2]    ;786
000058  f10a0a01          ADD      r10,r10,#1            ;783
                  |L8.92|
00005c  f1ba0f02          CMP      r10,#2                ;783
000060  d3e7              BCC      |L8.50|
000062  1c76              ADDS     r6,r6,#1              ;782
                  |L8.100|
000064  2e02              CMP      r6,#2                 ;782
000066  d3e1              BCC      |L8.44|
000068  2600              MOVS     r6,#0                 ;789
00006a  e005              B        |L8.120|
                  |L8.108|
00006c  2100              MOVS     r1,#0                 ;789
00006e  f1040054          ADD      r0,r4,#0x54           ;789
000072  f8401026          STR      r1,[r0,r6,LSL #2]     ;789
000076  1c76              ADDS     r6,r6,#1              ;789
                  |L8.120|
000078  2e04              CMP      r6,#4                 ;789
00007a  d3f7              BCC      |L8.108|
00007c  f44f6180          MOV      r1,#0x400             ;791
000080  4620              MOV      r0,r4                 ;791
000082  f7fffffe          BL       alloc_pool
000086  4605              MOV      r5,r0                 ;791
000088  60a0              STR      r0,[r4,#8]            ;791
00008a  b90d              CBNZ     r5,|L8.144|
00008c  2003              MOVS     r0,#3                 ;792
00008e  e7be              B        |L8.14|
                  |L8.144|
000090  2202              MOVS     r2,#2                 ;794
000092  4629              MOV      r1,r5                 ;794
000094  4620              MOV      r0,r4                 ;794
000096  6f63              LDR      r3,[r4,#0x74]         ;794
000098  4798              BLX      r3                    ;794
00009a  2802              CMP      r0,#2                 ;794
00009c  d001              BEQ      |L8.162|
00009e  2002              MOVS     r0,#2                 ;794
0000a0  e7b5              B        |L8.14|
                  |L8.162|
0000a2  7868              LDRB     r0,[r5,#1]            ;795
0000a4  7829              LDRB     r1,[r5,#0]            ;795
0000a6  ea402001          ORR      r0,r0,r1,LSL #8       ;795
0000aa  f64f71d8          MOV      r1,#0xffd8            ;795
0000ae  4288              CMP      r0,r1                 ;795
0000b0  d001              BEQ      |L8.182|
0000b2  2006              MOVS     r0,#6                 ;795
0000b4  e7ab              B        |L8.14|
                  |L8.182|
0000b6  f04f0902          MOV      r9,#2                 ;796
0000ba  bf00              NOP                            ;798
                  |L8.188|
0000bc  2204              MOVS     r2,#4                 ;800
0000be  4629              MOV      r1,r5                 ;800
0000c0  4620              MOV      r0,r4                 ;800
0000c2  6f63              LDR      r3,[r4,#0x74]         ;800
0000c4  4798              BLX      r3                    ;800
0000c6  2804              CMP      r0,#4                 ;800
0000c8  d001              BEQ      |L8.206|
0000ca  2002              MOVS     r0,#2                 ;800
0000cc  e79f              B        |L8.14|
                  |L8.206|
0000ce  7868              LDRB     r0,[r5,#1]            ;801
0000d0  7829              LDRB     r1,[r5,#0]            ;801
0000d2  ea402001          ORR      r0,r0,r1,LSL #8       ;801
0000d6  9002              STR      r0,[sp,#8]            ;801
0000d8  78e8              LDRB     r0,[r5,#3]            ;802
0000da  78a9              LDRB     r1,[r5,#2]            ;802
0000dc  ea402701          ORR      r7,r0,r1,LSL #8       ;802
0000e0  2f02              CMP      r7,#2                 ;803
0000e2  d904              BLS      |L8.238|
0000e4  21ff              MOVS     r1,#0xff              ;803
0000e6  9802              LDR      r0,[sp,#8]            ;803
0000e8  ebb12f20          CMP      r1,r0,ASR #8          ;803
0000ec  d001              BEQ      |L8.242|
                  |L8.238|
0000ee  2006              MOVS     r0,#6                 ;803
0000f0  e78d              B        |L8.14|
                  |L8.242|
0000f2  1ebf              SUBS     r7,r7,#2              ;804
0000f4  1d38              ADDS     r0,r7,#4              ;805
0000f6  4481              ADD      r9,r9,r0              ;805
0000f8  9802              LDR      r0,[sp,#8]            ;807
0000fa  b2c0              UXTB     r0,r0                 ;807
0000fc  38c0              SUBS     r0,r0,#0xc0           ;807
0000fe  281e              CMP      r0,#0x1e              ;807
000100  d272              BCS      |L8.488|
000102  e8dff000          TBB      [pc,r0]               ;807
000106  0ff4              DCB      0x0f,0xf4
000108  f3f272f1          DCB      0xf3,0xf2,0x72,0xf1
00010c  f0ef71ee          DCB      0xf0,0xef,0x71,0xee
000110  edec71eb          DCB      0xed,0xec,0x71,0xeb
000114  eae97171          DCB      0xea,0xe9,0x71,0x71
000118  71717171          DCB      0x71,0x71,0x71,0x71
00011c  717171e8          DCB      0x71,0x71,0x71,0xe8
000120  a68c715d          DCB      0xa6,0x8c,0x71,0x5d
000124  f5b76f80          CMP      r7,#0x400             ;810
000128  d901              BLS      |L8.302|
00012a  2004              MOVS     r0,#4                 ;810
00012c  e76f              B        |L8.14|
                  |L8.302|
00012e  463a              MOV      r2,r7                 ;811
000130  4629              MOV      r1,r5                 ;811
000132  4620              MOV      r0,r4                 ;811
000134  6f63              LDR      r3,[r4,#0x74]         ;811
000136  4798              BLX      r3                    ;811
000138  42b8              CMP      r0,r7                 ;811
00013a  d001              BEQ      |L8.320|
00013c  2002              MOVS     r0,#2                 ;811
00013e  e766              B        |L8.14|
                  |L8.320|
000140  7928              LDRB     r0,[r5,#4]            ;813
000142  78e9              LDRB     r1,[r5,#3]            ;813
000144  ea402001          ORR      r0,r0,r1,LSL #8       ;813
000148  61e0              STR      r0,[r4,#0x1c]         ;813
00014a  78a8              LDRB     r0,[r5,#2]            ;814
00014c  7869              LDRB     r1,[r5,#1]            ;814
00014e  ea402001          ORR      r0,r0,r1,LSL #8       ;814
000152  6220              STR      r0,[r4,#0x20]         ;814
000154  7968              LDRB     r0,[r5,#5]            ;815
000156  2803              CMP      r0,#3                 ;815
000158  d001              BEQ      |L8.350|
00015a  2008              MOVS     r0,#8                 ;815
00015c  e757              B        |L8.14|
                  |L8.350|
00015e  2600              MOVS     r6,#0                 ;818
000160  e02b              B        |L8.442|
                  |L8.354|
000162  eb060046          ADD      r0,r6,r6,LSL #1       ;819
000166  1dc0              ADDS     r0,r0,#7              ;819
000168  f8158000          LDRB     r8,[r5,r0]            ;819
00016c  b98e              CBNZ     r6,|L8.402|
00016e  f1b80f11          CMP      r8,#0x11              ;821
000172  d007              BEQ      |L8.388|
000174  f1b80f22          CMP      r8,#0x22              ;821
000178  d004              BEQ      |L8.388|
00017a  f1b80f21          CMP      r8,#0x21              ;821
00017e  d001              BEQ      |L8.388|
000180  2008              MOVS     r0,#8                 ;822
000182  e744              B        |L8.14|
                  |L8.388|
000184  ea4f1028          ASR      r0,r8,#4              ;823
000188  73a0              STRB     r0,[r4,#0xe]          ;823
00018a  f008000f          AND      r0,r8,#0xf            ;823
00018e  73e0              STRB     r0,[r4,#0xf]          ;823
000190  e004              B        |L8.412|
                  |L8.402|
000192  f1b80f11          CMP      r8,#0x11              ;825
000196  d001              BEQ      |L8.412|
000198  2008              MOVS     r0,#8                 ;825
00019a  e738              B        |L8.14|
                  |L8.412|
00019c  eb060046          ADD      r0,r6,r6,LSL #1       ;827
0001a0  3008              ADDS     r0,r0,#8              ;827
0001a2  f8158000          LDRB     r8,[r5,r0]            ;827
0001a6  f1b80f03          CMP      r8,#3                 ;828
0001aa  dd01              BLE      |L8.432|
0001ac  2008              MOVS     r0,#8                 ;828
0001ae  e72e              B        |L8.14|
                  |L8.432|
0001b0  f1040010          ADD      r0,r4,#0x10           ;829
0001b4  f8008006          STRB     r8,[r0,r6]            ;829
0001b8  1c76              ADDS     r6,r6,#1              ;818
                  |L8.442|
0001ba  2e03              CMP      r6,#3                 ;818
0001bc  d3d1              BCC      |L8.354|
0001be  e0ec              B        |L8.922|
0001c0  f5b76f80          CMP      r7,#0x400             ;835
0001c4  d901              BLS      |L8.458|
0001c6  2004              MOVS     r0,#4                 ;835
0001c8  e721              B        |L8.14|
                  |L8.458|
0001ca  463a              MOV      r2,r7                 ;836
0001cc  4629              MOV      r1,r5                 ;836
0001ce  4620              MOV      r0,r4                 ;836
0001d0  6f63              LDR      r3,[r4,#0x74]         ;836
0001d2  4798              BLX      r3                    ;836
0001d4  42b8              CMP      r0,r7                 ;836
0001d6  d001              BEQ      |L8.476|
0001d8  2002              MOVS     r0,#2                 ;836
0001da  e718              B        |L8.14|
                  |L8.476|
0001dc  7868              LDRB     r0,[r5,#1]            ;839
0001de  7829              LDRB     r1,[r5,#0]            ;839
0001e0  ea402001          ORR      r0,r0,r1,LSL #8       ;839
0001e4  8360              STRH     r0,[r4,#0x1a]         ;839
0001e6  e0d8              B        |L8.922|
                  |L8.488|
0001e8  e0cd              B        |L8.902|
0001ea  f5b76f80          CMP      r7,#0x400             ;844
0001ee  d901              BLS      |L8.500|
0001f0  2004              MOVS     r0,#4                 ;844
0001f2  e70c              B        |L8.14|
                  |L8.500|
0001f4  463a              MOV      r2,r7                 ;845
0001f6  4629              MOV      r1,r5                 ;845
0001f8  4620              MOV      r0,r4                 ;845
0001fa  6f63              LDR      r3,[r4,#0x74]         ;845
0001fc  4798              BLX      r3                    ;845
0001fe  42b8              CMP      r0,r7                 ;845
000200  d001              BEQ      |L8.518|
000202  2002              MOVS     r0,#2                 ;845
000204  e703              B        |L8.14|
                  |L8.518|
000206  463a              MOV      r2,r7                 ;848
000208  4629              MOV      r1,r5                 ;848
00020a  4620              MOV      r0,r4                 ;848
00020c  f7fffffe          BL       create_huffman_tbl
000210  b2c0              UXTB     r0,r0                 ;848
000212  9001              STR      r0,[sp,#4]            ;848
000214  9801              LDR      r0,[sp,#4]            ;849
000216  b108              CBZ      r0,|L8.540|
000218  9801              LDR      r0,[sp,#4]            ;849
00021a  e6f8              B        |L8.14|
                  |L8.540|
00021c  e0bd              B        |L8.922|
00021e  f5b76f80          CMP      r7,#0x400             ;854
000222  d901              BLS      |L8.552|
000224  2004              MOVS     r0,#4                 ;854
000226  e6f2              B        |L8.14|
                  |L8.552|
000228  463a              MOV      r2,r7                 ;855
00022a  4629              MOV      r1,r5                 ;855
00022c  4620              MOV      r0,r4                 ;855
00022e  6f63              LDR      r3,[r4,#0x74]         ;855
000230  4798              BLX      r3                    ;855
000232  42b8              CMP      r0,r7                 ;855
000234  d001              BEQ      |L8.570|
000236  2002              MOVS     r0,#2                 ;855
000238  e6e9              B        |L8.14|
                  |L8.570|
00023a  463a              MOV      r2,r7                 ;858
00023c  4629              MOV      r1,r5                 ;858
00023e  4620              MOV      r0,r4                 ;858
000240  f7fffffe          BL       create_qt_tbl
000244  b2c0              UXTB     r0,r0                 ;858
000246  9001              STR      r0,[sp,#4]            ;858
000248  9801              LDR      r0,[sp,#4]            ;859
00024a  b108              CBZ      r0,|L8.592|
00024c  9801              LDR      r0,[sp,#4]            ;859
00024e  e6de              B        |L8.14|
                  |L8.592|
000250  e0a3              B        |L8.922|
000252  f5b76f80          CMP      r7,#0x400             ;864
000256  d901              BLS      |L8.604|
000258  2004              MOVS     r0,#4                 ;864
00025a  e6d8              B        |L8.14|
                  |L8.604|
00025c  463a              MOV      r2,r7                 ;865
00025e  4629              MOV      r1,r5                 ;865
000260  4620              MOV      r0,r4                 ;865
000262  6f63              LDR      r3,[r4,#0x74]         ;865
000264  4798              BLX      r3                    ;865
000266  42b8              CMP      r0,r7                 ;865
000268  d001              BEQ      |L8.622|
00026a  2002              MOVS     r0,#2                 ;865
00026c  e6cf              B        |L8.14|
                  |L8.622|
00026e  69e0              LDR      r0,[r4,#0x1c]         ;867
000270  b108              CBZ      r0,|L8.630|
000272  6a20              LDR      r0,[r4,#0x20]         ;867
000274  b908              CBNZ     r0,|L8.634|
                  |L8.630|
000276  2006              MOVS     r0,#6                 ;867
000278  e6c9              B        |L8.14|
                  |L8.634|
00027a  7828              LDRB     r0,[r5,#0]            ;869
00027c  2803              CMP      r0,#3                 ;869
00027e  d001              BEQ      |L8.644|
000280  2008              MOVS     r0,#8                 ;869
000282  e6c4              B        |L8.14|
                  |L8.644|
000284  2600              MOVS     r6,#0                 ;872
000286  e034              B        |L8.754|
                  |L8.648|
000288  0070              LSLS     r0,r6,#1              ;873
00028a  1c80              ADDS     r0,r0,#2              ;873
00028c  f8158000          LDRB     r8,[r5,r0]            ;873
000290  f1b80f00          CMP      r8,#0                 ;874
000294  d004              BEQ      |L8.672|
000296  f1b80f11          CMP      r8,#0x11              ;874
00029a  d001              BEQ      |L8.672|
00029c  2008              MOVS     r0,#8                 ;874
00029e  e6b6              B        |L8.14|
                  |L8.672|
0002a0  b10e              CBZ      r6,|L8.678|
0002a2  2001              MOVS     r0,#1                 ;875
0002a4  e000              B        |L8.680|
                  |L8.678|
0002a6  2000              MOVS     r0,#0                 ;875
                  |L8.680|
0002a8  4680              MOV      r8,r0                 ;875
0002aa  f1040024          ADD      r0,r4,#0x24           ;876
0002ae  f8500038          LDR      r0,[r0,r8,LSL #3]     ;876
0002b2  b128              CBZ      r0,|L8.704|
0002b4  f1040024          ADD      r0,r4,#0x24           ;876
0002b8  eb0000c8          ADD      r0,r0,r8,LSL #3       ;876
0002bc  6840              LDR      r0,[r0,#4]            ;876
0002be  b908              CBNZ     r0,|L8.708|
                  |L8.704|
0002c0  2006              MOVS     r0,#6                 ;877
0002c2  e6a4              B        |L8.14|
                  |L8.708|
0002c4  f1040010          ADD      r0,r4,#0x10           ;878
0002c8  5d81              LDRB     r1,[r0,r6]            ;878
0002ca  3044              ADDS     r0,r0,#0x44           ;878
0002cc  f8500021          LDR      r0,[r0,r1,LSL #2]     ;878
0002d0  b970              CBNZ     r0,|L8.752|
0002d2  2006              MOVS     r0,#6                 ;878
0002d4  e69b              B        |L8.14|
0002d6  e054              B        |L8.898|
0002d8  e052              B        |L8.896|
0002da  e050              B        |L8.894|
0002dc  e04e              B        |L8.892|
0002de  e04c              B        |L8.890|
0002e0  e04a              B        |L8.888|
0002e2  e048              B        |L8.886|
0002e4  e046              B        |L8.884|
0002e6  e044              B        |L8.882|
0002e8  e042              B        |L8.880|
0002ea  e040              B        |L8.878|
0002ec  e03e              B        |L8.876|
0002ee  e03c              B        |L8.874|
                  |L8.752|
0002f0  1c76              ADDS     r6,r6,#1              ;872
                  |L8.754|
0002f2  2e03              CMP      r6,#3                 ;872
0002f4  d3c8              BCC      |L8.648|
0002f6  7be0              LDRB     r0,[r4,#0xf]          ;882
0002f8  7ba1              LDRB     r1,[r4,#0xe]          ;882
0002fa  fb00fb01          MUL      r11,r0,r1             ;882
0002fe  f1bb0f00          CMP      r11,#0                ;883
000302  d101              BNE      |L8.776|
000304  2006              MOVS     r0,#6                 ;883
000306  e682              B        |L8.14|
                  |L8.776|
000308  2140              MOVS     r1,#0x40              ;884
00030a  eb0117cb          ADD      r7,r1,r11,LSL #7      ;884
00030e  2fff              CMP      r7,#0xff              ;885
000310  d800              BHI      |L8.788|
000312  008f              LSLS     r7,r1,#2              ;885
                  |L8.788|
000314  4639              MOV      r1,r7                 ;886
000316  4620              MOV      r0,r4                 ;886
000318  f7fffffe          BL       alloc_pool
00031c  6660              STR      r0,[r4,#0x64]         ;886
00031e  6e60              LDR      r0,[r4,#0x64]         ;887
000320  b908              CBNZ     r0,|L8.806|
000322  2003              MOVS     r0,#3                 ;887
000324  e673              B        |L8.14|
                  |L8.806|
000326  f10b0002          ADD      r0,r11,#2             ;888
00032a  0181              LSLS     r1,r0,#6              ;888
00032c  4620              MOV      r0,r4                 ;888
00032e  f7fffffe          BL       alloc_pool
000332  66a0              STR      r0,[r4,#0x68]         ;888
000334  6ea0              LDR      r0,[r4,#0x68]         ;889
000336  b908              CBNZ     r0,|L8.828|
000338  2003              MOVS     r0,#3                 ;889
00033a  e668              B        |L8.14|
                  |L8.828|
00033c  6065              STR      r5,[r4,#4]            ;892
00033e  2000              MOVS     r0,#0                 ;892
000340  6020              STR      r0,[r4,#0]            ;892
000342  7320              STRB     r0,[r4,#0xc]          ;892
000344  f3c90009          UBFX     r0,r9,#0,#10          ;893
000348  f1b00900          SUBS     r9,r0,#0              ;893
00034c  d00b              BEQ      |L8.870|
00034e  f5c96280          RSB      r2,r9,#0x400          ;894
000352  eb050109          ADD      r1,r5,r9              ;894
000356  4620              MOV      r0,r4                 ;894
000358  6f63              LDR      r3,[r4,#0x74]         ;894
00035a  4798              BLX      r3                    ;894
00035c  6020              STR      r0,[r4,#0]            ;894
00035e  eb050009          ADD      r0,r5,r9              ;895
000362  1e40              SUBS     r0,r0,#1              ;895
000364  6060              STR      r0,[r4,#4]            ;895
                  |L8.870|
000366  2000              MOVS     r0,#0                 ;898
000368  e651              B        |L8.14|
                  |L8.874|
00036a  bf00              NOP                            ;901
                  |L8.876|
00036c  bf00              NOP                            ;902
                  |L8.878|
00036e  bf00              NOP                            ;903
                  |L8.880|
000370  bf00              NOP                            ;904
                  |L8.882|
000372  bf00              NOP                            ;905
                  |L8.884|
000374  bf00              NOP                            ;906
                  |L8.886|
000376  bf00              NOP                            ;907
                  |L8.888|
000378  bf00              NOP                            ;908
                  |L8.890|
00037a  bf00              NOP                            ;909
                  |L8.892|
00037c  bf00              NOP                            ;910
                  |L8.894|
00037e  bf00              NOP                            ;911
                  |L8.896|
000380  bf00              NOP                            ;912
                  |L8.898|
000382  2008              MOVS     r0,#8                 ;913
000384  e643              B        |L8.14|
                  |L8.902|
000386  463a              MOV      r2,r7                 ;917
000388  2100              MOVS     r1,#0                 ;917
00038a  4620              MOV      r0,r4                 ;917
00038c  6f63              LDR      r3,[r4,#0x74]         ;917
00038e  4798              BLX      r3                    ;917
000390  42b8              CMP      r0,r7                 ;917
000392  d001              BEQ      |L8.920|
000394  2002              MOVS     r0,#2                 ;918
000396  e63a              B        |L8.14|
                  |L8.920|
000398  bf00              NOP                            ;807
                  |L8.922|
00039a  e68f              B        |L8.188|
;;;922    
                          ENDP


                          AREA ||i.jpeg_freeall||, CODE, READONLY, ALIGN=2

                  jpeg_freeall PROC
;;;1003   //
;;;1004   void jpeg_freeall(void)
000000  b510              PUSH     {r4,lr}
;;;1005   {
;;;1006   	pic_memfree(f_jpeg);		//f_jpeg
000002  4806              LDR      r0,|L9.28|
000004  6800              LDR      r0,[r0,#0]  ; f_jpeg
000006  f7fffffe          BL       pic_memfree
;;;1007   	pic_memfree(jpeg_dev);		//jpeg_dev
00000a  4805              LDR      r0,|L9.32|
00000c  6800              LDR      r0,[r0,#0]  ; jpeg_dev
00000e  f7fffffe          BL       pic_memfree
;;;1008   	pic_memfree(jpg_buffer);	//jpg_buffer
000012  4804              LDR      r0,|L9.36|
000014  6800              LDR      r0,[r0,#0]  ; jpg_buffer
000016  f7fffffe          BL       pic_memfree
;;;1009   }
00001a  bd10              POP      {r4,pc}
;;;1010   
                          ENDP

                  |L9.28|
                          DCD      f_jpeg
                  |L9.32|
                          DCD      jpeg_dev
                  |L9.36|
                          DCD      jpg_buffer

                          AREA ||i.jpeg_in_func||, CODE, READONLY, ALIGN=1

                  jpeg_in_func PROC
;;;1025   //:/
;;;1026   u32 jpeg_in_func(JDEC* jd,u8* buf,u32 num) 
000000  b5f8              PUSH     {r3-r7,lr}
;;;1027   { 
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
000006  4616              MOV      r6,r2
;;;1028       u32  rb; //
;;;1029       FIL *dev=(FIL*)jd->device;  //FATFSFIL
000008  6fa7              LDR      r7,[r4,#0x78]
;;;1030       if(buf)     				//
00000a  b13d              CBZ      r5,|L10.28|
;;;1031       { 
;;;1032           f_read(dev,buf,num,&rb);//FATFSf_readjpeg
00000c  466b              MOV      r3,sp
00000e  4632              MOV      r2,r6
000010  4629              MOV      r1,r5
000012  4638              MOV      r0,r7
000014  f7fffffe          BL       f_read
;;;1033           return rb;        		//
000018  9800              LDR      r0,[sp,#0]
                  |L10.26|
;;;1034       }else return (f_lseek(dev,f_tell(dev)+num)==FR_OK)?num:0;//n 
;;;1035   }  
00001a  bdf8              POP      {r3-r7,pc}
                  |L10.28|
00001c  68b8              LDR      r0,[r7,#8]            ;1034
00001e  1981              ADDS     r1,r0,r6              ;1034
000020  4638              MOV      r0,r7                 ;1034
000022  f7fffffe          BL       f_lseek
000026  b908              CBNZ     r0,|L10.44|
000028  4630              MOV      r0,r6                 ;1034
00002a  e7f6              B        |L10.26|
                  |L10.44|
00002c  2000              MOVS     r0,#0                 ;1034
00002e  e7f4              B        |L10.26|
;;;1036   //
                          ENDP


                          AREA ||i.jpeg_mallocall||, CODE, READONLY, ALIGN=2

                  jpeg_mallocall PROC
;;;992    ///
;;;993    u8 jpeg_mallocall(void)
000000  b510              PUSH     {r4,lr}
;;;994    {
;;;995    	f_jpeg=(FIL*)pic_memalloc(sizeof(FIL));
000002  f44f700a          MOV      r0,#0x228
000006  f7fffffe          BL       pic_memalloc
00000a  490f              LDR      r1,|L11.72|
00000c  6008              STR      r0,[r1,#0]  ; f_jpeg
;;;996    	if(f_jpeg==NULL)return PIC_MEM_ERR;			//.	  
00000e  4608              MOV      r0,r1
000010  6800              LDR      r0,[r0,#0]  ; f_jpeg
000012  b908              CBNZ     r0,|L11.24|
000014  2011              MOVS     r0,#0x11
                  |L11.22|
;;;997    	jpeg_dev=(JDEC*)pic_memalloc(sizeof(JDEC));
;;;998    	if(jpeg_dev==NULL)return PIC_MEM_ERR;		//.
;;;999    	jpg_buffer=(u8*)pic_memalloc(JPEG_WBUF_SIZE);
;;;1000   	if(jpg_buffer==NULL)return PIC_MEM_ERR;		//. 
;;;1001   	return 0;
;;;1002   }
000016  bd10              POP      {r4,pc}
                  |L11.24|
000018  207c              MOVS     r0,#0x7c              ;997
00001a  f7fffffe          BL       pic_memalloc
00001e  490b              LDR      r1,|L11.76|
000020  6008              STR      r0,[r1,#0]            ;997  ; jpeg_dev
000022  4608              MOV      r0,r1                 ;998
000024  6800              LDR      r0,[r0,#0]            ;998  ; jpeg_dev
000026  b908              CBNZ     r0,|L11.44|
000028  2011              MOVS     r0,#0x11              ;998
00002a  e7f4              B        |L11.22|
                  |L11.44|
00002c  f44f5080          MOV      r0,#0x1000            ;999
000030  f7fffffe          BL       pic_memalloc
000034  4906              LDR      r1,|L11.80|
000036  6008              STR      r0,[r1,#0]            ;999  ; jpg_buffer
000038  4608              MOV      r0,r1                 ;1000
00003a  6800              LDR      r0,[r0,#0]            ;1000  ; jpg_buffer
00003c  b908              CBNZ     r0,|L11.66|
00003e  2011              MOVS     r0,#0x11              ;1000
000040  e7e9              B        |L11.22|
                  |L11.66|
000042  2000              MOVS     r0,#0                 ;1001
000044  e7e7              B        |L11.22|
;;;1003   //
                          ENDP

000046  0000              DCW      0x0000
                  |L11.72|
                          DCD      f_jpeg
                  |L11.76|
                          DCD      jpeg_dev
                  |L11.80|
                          DCD      jpg_buffer

                          AREA ||i.jpeg_out_func_fill||, CODE, READONLY, ALIGN=2

                  jpeg_out_func_fill PROC
;;;1040   //:0,;1,/
;;;1041   u32 jpeg_out_func_fill(JDEC* jd,void* rgbbuf,JRECT* rect) 
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;1042   { 
000004  4681              MOV      r9,r0
000006  460d              MOV      r5,r1
000008  4614              MOV      r4,r2
;;;1043   	u16 *pencolor=(u16*)rgbbuf;
00000a  462e              MOV      r6,r5
;;;1044   	u16 width=rect->right-rect->left+1;		//
00000c  8860              LDRH     r0,[r4,#2]
00000e  8821              LDRH     r1,[r4,#0]
000010  1a40              SUBS     r0,r0,r1
000012  1c40              ADDS     r0,r0,#1
000014  b287              UXTH     r7,r0
;;;1045   	u16 height=rect->bottom-rect->top+1;	// 
000016  88e0              LDRH     r0,[r4,#6]
000018  88a1              LDRH     r1,[r4,#4]
00001a  1a40              SUBS     r0,r0,r1
00001c  1c40              ADDS     r0,r0,#1
00001e  fa1ff880          UXTH     r8,r0
;;;1046   	pic_phy.fillcolor(rect->left+picinfo.S_XOFF,rect->top+picinfo.S_YOFF,width,height,pencolor);// 
000022  9600              STR      r6,[sp,#0]
000024  88a2              LDRH     r2,[r4,#4]
000026  4b09              LDR      r3,|L12.76|
000028  8b9b              LDRH     r3,[r3,#0x1c]  ; picinfo
00002a  441a              ADD      r2,r2,r3
00002c  b291              UXTH     r1,r2
00002e  8822              LDRH     r2,[r4,#0]
000030  4b06              LDR      r3,|L12.76|
000032  8b1b              LDRH     r3,[r3,#0x18]  ; picinfo
000034  441a              ADD      r2,r2,r3
000036  b290              UXTH     r0,r2
000038  4a05              LDR      r2,|L12.80|
00003a  4643              MOV      r3,r8
00003c  f8d2c010          LDR      r12,[r2,#0x10]  ; pic_phy
000040  463a              MOV      r2,r7
000042  47e0              BLX      r12
;;;1047       return 0;    //0, 
000044  2000              MOVS     r0,#0
;;;1048   } 
000046  e8bd83f8          POP      {r3-r9,pc}
;;;1049   //
                          ENDP

00004a  0000              DCW      0x0000
                  |L12.76|
                          DCD      picinfo
                  |L12.80|
                          DCD      pic_phy

                          AREA ||i.jpeg_out_func_point||, CODE, READONLY, ALIGN=2

                  jpeg_out_func_point PROC
;;;1053   //:0,;1,/
;;;1054   u32 jpeg_out_func_point(JDEC* jd,void* rgbbuf,JRECT* rect) 
000000  e92d4ff8          PUSH     {r3-r11,lr}
;;;1055   { 
000004  4688              MOV      r8,r1
000006  4614              MOV      r4,r2
;;;1056   	u16 i,j;
;;;1057   	u16 realx=rect->left,realy=0;
000008  f8b49000          LDRH     r9,[r4,#0]
00000c  f04f0a00          MOV      r10,#0
;;;1058   	u16 *pencolor=rgbbuf;
000010  4645              MOV      r5,r8
;;;1059   	u16 width=rect->right-rect->left+1;		//
000012  8860              LDRH     r0,[r4,#2]
000014  8821              LDRH     r1,[r4,#0]
000016  1a40              SUBS     r0,r0,r1
000018  1c40              ADDS     r0,r0,#1
00001a  fa1ffb80          UXTH     r11,r0
;;;1060   	u16 height=rect->bottom-rect->top+1;	//
00001e  88e0              LDRH     r0,[r4,#6]
000020  88a1              LDRH     r1,[r4,#4]
000022  1a40              SUBS     r0,r0,r1
000024  1c40              ADDS     r0,r0,#1
000026  b280              UXTH     r0,r0
000028  9000              STR      r0,[sp,#0]
;;;1061      	for(i=0;i<height;i++)//y
00002a  2600              MOVS     r6,#0
00002c  e03d              B        |L13.170|
                  |L13.46|
;;;1062   	{
;;;1063   		realy=(picinfo.Div_Fac*(rect->top+i))>>13;//Y											 
00002e  4822              LDR      r0,|L13.184|
000030  68c0              LDR      r0,[r0,#0xc]  ; picinfo
000032  88a1              LDRH     r1,[r4,#4]
000034  4431              ADD      r1,r1,r6
000036  4348              MULS     r0,r1,r0
000038  f3c03a4f          UBFX     r10,r0,#13,#16
;;;1064   		//picinfo.staticxpicinfo.staticy ,,!!!
;;;1065   		if(!is_element_ok(realx,realy,0))//? 
00003c  2200              MOVS     r2,#0
00003e  4651              MOV      r1,r10
000040  4648              MOV      r0,r9
000042  f7fffffe          BL       is_element_ok
000046  b910              CBNZ     r0,|L13.78|
;;;1066   		{ 
;;;1067   			pencolor+=width;
000048  eb05054b          ADD      r5,r5,r11,LSL #1
;;;1068   			continue;
00004c  e02b              B        |L13.166|
                  |L13.78|
;;;1069   		}
;;;1070   		for(j=0;j<width;j++)//x
00004e  2700              MOVS     r7,#0
000050  e026              B        |L13.160|
                  |L13.82|
;;;1071   		{
;;;1072   			realx=(picinfo.Div_Fac*(rect->left+j))>>13;//X
000052  4819              LDR      r0,|L13.184|
000054  68c0              LDR      r0,[r0,#0xc]  ; picinfo
000056  8821              LDRH     r1,[r4,#0]
000058  4439              ADD      r1,r1,r7
00005a  4348              MULS     r0,r1,r0
00005c  f3c0394f          UBFX     r9,r0,#13,#16
;;;1073   			//picinfo.staticxpicinfo.staticy
;;;1074   			if(!is_element_ok(realx,realy,1))//? 
000060  2201              MOVS     r2,#1
000062  4651              MOV      r1,r10
000064  4648              MOV      r0,r9
000066  f7fffffe          BL       is_element_ok
00006a  b908              CBNZ     r0,|L13.112|
;;;1075   			{
;;;1076   				pencolor++;
00006c  1cad              ADDS     r5,r5,#2
;;;1077   				continue;
00006e  e015              B        |L13.156|
                  |L13.112|
;;;1078   			}
;;;1079   			pic_phy.draw_point(realx+picinfo.S_XOFF,realy+picinfo.S_YOFF,*pencolor);//						
000070  882a              LDRH     r2,[r5,#0]
000072  f8dfc044          LDR      r12,|L13.184|
000076  f8bcc01c          LDRH     r12,[r12,#0x1c]  ; picinfo
00007a  44d4              ADD      r12,r12,r10
00007c  fa1ff18c          UXTH     r1,r12
000080  f8dfc034          LDR      r12,|L13.184|
000084  f8bcc018          LDRH     r12,[r12,#0x18]  ; picinfo
000088  44cc              ADD      r12,r12,r9
00008a  fa1ff08c          UXTH     r0,r12
00008e  f8dfc02c          LDR      r12,|L13.188|
000092  f8dc3004          LDR      r3,[r12,#4]  ; pic_phy
000096  4798              BLX      r3
;;;1080   			pencolor++;
000098  1cad              ADDS     r5,r5,#2
00009a  bf00              NOP                            ;1077
                  |L13.156|
00009c  1c78              ADDS     r0,r7,#1              ;1070
00009e  b287              UXTH     r7,r0                 ;1070
                  |L13.160|
0000a0  455f              CMP      r7,r11                ;1070
0000a2  dbd6              BLT      |L13.82|
0000a4  bf00              NOP                            ;1068
                  |L13.166|
0000a6  1c70              ADDS     r0,r6,#1              ;1061
0000a8  b286              UXTH     r6,r0                 ;1061
                  |L13.170|
0000aa  9800              LDR      r0,[sp,#0]            ;1061
0000ac  4286              CMP      r6,r0                 ;1061
0000ae  dbbe              BLT      |L13.46|
;;;1081   		}
;;;1082   	}
;;;1083       return 0;    //0, 
0000b0  2000              MOVS     r0,#0
;;;1084   } 
0000b2  e8bd8ff8          POP      {r3-r11,pc}
;;;1085   //jpeg/jpgs
                          ENDP

0000b6  0000              DCW      0x0000
                  |L13.184|
                          DCD      picinfo
                  |L13.188|
                          DCD      pic_phy

                          AREA ||i.jpg_decode||, CODE, READONLY, ALIGN=2

                  jpg_decode PROC
;;;1088   //:0,;,.
;;;1089   u8 jpg_decode(const u8 *filename,u8 fast)
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;1090   {  
000004  4606              MOV      r6,r0
000006  460f              MOV      r7,r1
;;;1091   	u8 res=0;	// 
000008  2500              MOVS     r5,#0
;;;1092   	u8 scale;	// 0,1/2,1/4,1/8  
;;;1093   	UINT (*outfun)(JDEC*, void*, JRECT*);
;;;1094   	
;;;1095   #if JPEG_USE_MALLOC == 1	//malloc
;;;1096   	res=jpeg_mallocall(); 
00000a  f7fffffe          BL       jpeg_mallocall
00000e  4605              MOV      r5,r0
;;;1097   #endif
;;;1098   	if(res==0)
000010  2d00              CMP      r5,#0
000012  d164              BNE      |L14.222|
;;;1099   	{
;;;1100   		//JPEG/JPG		 
;;;1101   		res=f_open(f_jpeg,(const TCHAR*)filename,FA_READ);//
000014  2201              MOVS     r2,#1
000016  4631              MOV      r1,r6
000018  4833              LDR      r0,|L14.232|
00001a  6800              LDR      r0,[r0,#0]  ; f_jpeg
00001c  f7fffffe          BL       f_open
000020  4605              MOV      r5,r0
;;;1102   		if(res==FR_OK)//
000022  2d00              CMP      r5,#0
000024  d157              BNE      |L14.214|
;;;1103   		{ 
;;;1104   			res=jd_prepare(jpeg_dev,jpeg_in_func,jpg_buffer,JPEG_WBUF_SIZE,f_jpeg);//TjpgDecjd_prepare
000026  4830              LDR      r0,|L14.232|
000028  6800              LDR      r0,[r0,#0]  ; f_jpeg
00002a  f44f5380          MOV      r3,#0x1000
00002e  9000              STR      r0,[sp,#0]
000030  482e              LDR      r0,|L14.236|
000032  492f              LDR      r1,|L14.240|
000034  6802              LDR      r2,[r0,#0]  ; jpg_buffer
000036  482f              LDR      r0,|L14.244|
000038  6800              LDR      r0,[r0,#0]  ; jpeg_dev
00003a  f7fffffe          BL       jd_prepare
00003e  4605              MOV      r5,r0
;;;1105   			outfun=jpeg_out_func_point;//
000040  f8df80b4          LDR      r8,|L14.248|
;;;1106   			if(res==JDR_OK)// 
000044  2d00              CMP      r5,#0
000046  d146              BNE      |L14.214|
;;;1107   			{ 	
;;;1108   				for(scale=0;scale<4;scale++)//
000048  2400              MOVS     r4,#0
00004a  e027              B        |L14.156|
                  |L14.76|
;;;1109   				{ 
;;;1110   					if((jpeg_dev->width>>scale)<=picinfo.S_Width&&(jpeg_dev->height>>scale)<=picinfo.S_Height)//
00004c  4829              LDR      r0,|L14.244|
00004e  6800              LDR      r0,[r0,#0]  ; jpeg_dev
000050  69c0              LDR      r0,[r0,#0x1c]
000052  40e0              LSRS     r0,r0,r4
000054  4929              LDR      r1,|L14.252|
000056  6949              LDR      r1,[r1,#0x14]  ; picinfo
000058  4288              CMP      r0,r1
00005a  d81d              BHI      |L14.152|
00005c  4825              LDR      r0,|L14.244|
00005e  6800              LDR      r0,[r0,#0]  ; jpeg_dev
000060  6a00              LDR      r0,[r0,#0x20]
000062  40e0              LSRS     r0,r0,r4
000064  4925              LDR      r1,|L14.252|
000066  6909              LDR      r1,[r1,#0x10]  ; picinfo
000068  4288              CMP      r0,r1
00006a  d815              BHI      |L14.152|
;;;1111   					{	
;;;1112   						if(((jpeg_dev->width>>scale)!=picinfo.S_Width)&&((jpeg_dev->height>>scale)!=picinfo.S_Height&&scale))scale=0;//,
00006c  4821              LDR      r0,|L14.244|
00006e  6800              LDR      r0,[r0,#0]  ; jpeg_dev
000070  69c0              LDR      r0,[r0,#0x1c]
000072  40e0              LSRS     r0,r0,r4
000074  4921              LDR      r1,|L14.252|
000076  6949              LDR      r1,[r1,#0x14]  ; picinfo
000078  4288              CMP      r0,r1
00007a  d00a              BEQ      |L14.146|
00007c  481d              LDR      r0,|L14.244|
00007e  6800              LDR      r0,[r0,#0]  ; jpeg_dev
000080  6a00              LDR      r0,[r0,#0x20]
000082  40e0              LSRS     r0,r0,r4
000084  491d              LDR      r1,|L14.252|
000086  6909              LDR      r1,[r1,#0x10]  ; picinfo
000088  4288              CMP      r0,r1
00008a  d002              BEQ      |L14.146|
00008c  b10c              CBZ      r4,|L14.146|
00008e  2400              MOVS     r4,#0
000090  e001              B        |L14.150|
                  |L14.146|
;;;1113   						else outfun=jpeg_out_func_fill;	//, 
000092  f8df806c          LDR      r8,|L14.256|
                  |L14.150|
;;;1114   						break; 							
000096  e003              B        |L14.160|
                  |L14.152|
000098  1c60              ADDS     r0,r4,#1              ;1108
00009a  b2c4              UXTB     r4,r0                 ;1108
                  |L14.156|
00009c  2c04              CMP      r4,#4                 ;1108
00009e  dbd5              BLT      |L14.76|
                  |L14.160|
0000a0  bf00              NOP      
;;;1115   					} 
;;;1116   				} 
;;;1117   				if(scale==4)scale=0;//
0000a2  2c04              CMP      r4,#4
0000a4  d100              BNE      |L14.168|
0000a6  2400              MOVS     r4,#0
                  |L14.168|
;;;1118   				if(fast==0)//
0000a8  b90f              CBNZ     r7,|L14.174|
;;;1119   				{ 
;;;1120   					outfun=jpeg_out_func_point;//
0000aa  f8df804c          LDR      r8,|L14.248|
                  |L14.174|
;;;1121   				}
;;;1122   				picinfo.ImgHeight=jpeg_dev->height>>scale;	//
0000ae  4811              LDR      r0,|L14.244|
0000b0  6800              LDR      r0,[r0,#0]  ; jpeg_dev
0000b2  6a00              LDR      r0,[r0,#0x20]
0000b4  40e0              LSRS     r0,r0,r4
0000b6  4911              LDR      r1,|L14.252|
0000b8  6088              STR      r0,[r1,#8]  ; picinfo
;;;1123   				picinfo.ImgWidth=jpeg_dev->width>>scale;	// 
0000ba  480e              LDR      r0,|L14.244|
0000bc  6800              LDR      r0,[r0,#0]  ; jpeg_dev
0000be  69c0              LDR      r0,[r0,#0x1c]
0000c0  40e0              LSRS     r0,r0,r4
0000c2  6048              STR      r0,[r1,#4]  ; picinfo
;;;1124   				ai_draw_init();								// 
0000c4  f7fffffe          BL       ai_draw_init
;;;1125   				//TjpgDecjd_decomp
;;;1126   				res=jd_decomp(jpeg_dev,outfun,scale); 
0000c8  4622              MOV      r2,r4
0000ca  4641              MOV      r1,r8
0000cc  4809              LDR      r0,|L14.244|
0000ce  6800              LDR      r0,[r0,#0]  ; jpeg_dev
0000d0  f7fffffe          BL       jd_decomp
0000d4  4605              MOV      r5,r0
                  |L14.214|
;;;1127   			}
;;;1128   		} 
;;;1129   		f_close(f_jpeg); //0
0000d6  4804              LDR      r0,|L14.232|
0000d8  6800              LDR      r0,[r0,#0]  ; f_jpeg
0000da  f7fffffe          BL       f_close
                  |L14.222|
;;;1130   	}
;;;1131   #if JPEG_USE_MALLOC == 1//malloc
;;;1132   	jpeg_freeall();		//
0000de  f7fffffe          BL       jpeg_freeall
;;;1133   #endif
;;;1134   	return res;	 
0000e2  4628              MOV      r0,r5
;;;1135   }
0000e4  e8bd83f8          POP      {r3-r9,pc}
;;;1136   
                          ENDP

                  |L14.232|
                          DCD      f_jpeg
                  |L14.236|
                          DCD      jpg_buffer
                  |L14.240|
                          DCD      jpeg_in_func
                  |L14.244|
                          DCD      jpeg_dev
                  |L14.248|
                          DCD      jpeg_out_func_point
                  |L14.252|
                          DCD      picinfo
                  |L14.256|
                          DCD      jpeg_out_func_fill

                          AREA ||i.mcu_load||, CODE, READONLY, ALIGN=2

                  mcu_load PROC
;;;479    static
;;;480    JRESULT mcu_load (
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;481    	JDEC* jd		/* Pointer to the decompressor object */
;;;482    )
;;;483    {
000004  b089              SUB      sp,sp,#0x24
000006  4604              MOV      r4,r0
;;;484    	LONG *tmp = (LONG*)jd->workbuf;	/* Block working buffer for de-quantize and IDCT */
000008  f8d49064          LDR      r9,[r4,#0x64]
;;;485    	UINT blk, nby, nbc, i, z, id, cmp;
;;;486    	INT b, d, e;
;;;487    	BYTE *bp;
;;;488    	const BYTE *hb, *hd;
;;;489    	const WORD *hc;
;;;490    	const LONG *dqf;
;;;491    
;;;492    
;;;493    	nby = jd->msx * jd->msy;	/* Number of Y blocks (1, 2 or 4) */
00000c  7ba0              LDRB     r0,[r4,#0xe]
00000e  7be1              LDRB     r1,[r4,#0xf]
000010  4348              MULS     r0,r1,r0
000012  9008              STR      r0,[sp,#0x20]
;;;494    	nbc = 2;					/* Number of C blocks (2) */
000014  2002              MOVS     r0,#2
000016  9007              STR      r0,[sp,#0x1c]
;;;495    	bp = jd->mcubuf;			/* Pointer to the first block */
000018  6ea0              LDR      r0,[r4,#0x68]
00001a  9004              STR      r0,[sp,#0x10]
;;;496    
;;;497    	for (blk = 0; blk < nby + nbc; blk++) {
00001c  f04f0b00          MOV      r11,#0
000020  e0d4              B        |L15.460|
                  |L15.34|
;;;498    		cmp = (blk < nby) ? 0 : blk - nby + 1;	/* Component number 0:Y, 1:Cb, 2:Cr */
000022  9808              LDR      r0,[sp,#0x20]
000024  4583              CMP      r11,r0
000026  d201              BCS      |L15.44|
000028  2000              MOVS     r0,#0
00002a  e003              B        |L15.52|
                  |L15.44|
00002c  9808              LDR      r0,[sp,#0x20]
00002e  ebab0000          SUB      r0,r11,r0
000032  1c40              ADDS     r0,r0,#1
                  |L15.52|
000034  9005              STR      r0,[sp,#0x14]
;;;499    		id = cmp ? 1 : 0;						/* Huffman table ID of the component */
000036  9805              LDR      r0,[sp,#0x14]
000038  b108              CBZ      r0,|L15.62|
00003a  2001              MOVS     r0,#1
00003c  e000              B        |L15.64|
                  |L15.62|
00003e  2000              MOVS     r0,#0
                  |L15.64|
000040  4680              MOV      r8,r0
;;;500    
;;;501    		/* Extract a DC element from input stream */
;;;502    		hb = jd->huffbits[id][0];				/* Huffman table for the DC element */
000042  f1040024          ADD      r0,r4,#0x24
000046  f8500038          LDR      r0,[r0,r8,LSL #3]
00004a  9003              STR      r0,[sp,#0xc]
;;;503    		hc = jd->huffcode[id][0];
00004c  f1040034          ADD      r0,r4,#0x34
000050  f8500038          LDR      r0,[r0,r8,LSL #3]
000054  9001              STR      r0,[sp,#4]
;;;504    		hd = jd->huffdata[id][0];
000056  f1040044          ADD      r0,r4,#0x44
00005a  f8500038          LDR      r0,[r0,r8,LSL #3]
00005e  9002              STR      r0,[sp,#8]
;;;505    		b = huffext(jd, hb, hc, hd);			/* Extract a huffman coded data (bit length) */
000060  4620              MOV      r0,r4
000062  e9dd2301          LDRD     r2,r3,[sp,#4]
000066  9903              LDR      r1,[sp,#0xc]
000068  f7fffffe          BL       huffext
00006c  4605              MOV      r5,r0
;;;506    		if (b < 0) return (JRESULT)(0 - b);		/* Err: invalid code or input */
00006e  2d00              CMP      r5,#0
000070  da04              BGE      |L15.124|
000072  4268              RSBS     r0,r5,#0
000074  b2c0              UXTB     r0,r0
                  |L15.118|
;;;507    		d = jd->dcv[cmp];						/* DC value of previous block */
;;;508    		if (b) {								/* If there is any difference from previous block */
;;;509    			e = bitext(jd, b);					/* Extract data bits */
;;;510    			if (e < 0) return (JRESULT)(0 - e);	/* Err: input */
;;;511    			b = 1 << (b - 1);					/* MSB position */
;;;512    			if (!(e & b)) e -= (b << 1) - 1;	/* Restore sign if needed */
;;;513    			d += e;								/* Get current value */
;;;514    			jd->dcv[cmp] = (SHORT)d;			/* Save current DC value for next block */
;;;515    		}
;;;516    		dqf = jd->qttbl[jd->qtid[cmp]];			/* De-quantizer table ID for this component */
;;;517    		tmp[0] = d * dqf[0] >> 8;				/* De-quantize, apply scale factor of Arai algorithm and descale 8 bits */
;;;518    
;;;519    		/* Extract following 63 AC elements from input stream */
;;;520    		for (i = 1; i < 64; i++) tmp[i] = 0;	/* Clear rest of elements */
;;;521    		hb = jd->huffbits[id][1];				/* Huffman table for the AC elements */
;;;522    		hc = jd->huffcode[id][1];
;;;523    		hd = jd->huffdata[id][1];
;;;524    		i = 1;					/* Top of the AC elements */
;;;525    		do {
;;;526    			b = huffext(jd, hb, hc, hd);		/* Extract a huffman coded value (zero runs and bit length) */
;;;527    			if (b == 0) break;					/* EOB? */
;;;528    			if (b < 0) return (JRESULT)(0 - b);	/* Err: invalid code or input error */
;;;529    			z = (UINT)b >> 4;					/* Number of leading zero elements */
;;;530    			if (z) {
;;;531    				i += z;							/* Skip zero elements */
;;;532    				if (i >= 64) return JDR_FMT1;	/* Too long zero run */
;;;533    			}
;;;534    			if (b &= 0x0F) {					/* Bit length */
;;;535    				d = bitext(jd, b);				/* Extract data bits */
;;;536    				if (d<0)return (JRESULT)(0-d);	/* Err: input device */
;;;537    				b = 1 << (b - 1);				/* MSB position */
;;;538    				if (!(d & b)) d -= (b << 1) - 1;/* Restore negative value if needed */
;;;539    				z = ZIG(i);						/* Zigzag-order to raster-order converted index */
;;;540    				tmp[z] = d * dqf[z] >> 8;		/* De-quantize, apply scale factor of Arai algorithm and descale 8 bits */
;;;541    			}
;;;542    		} while (++i < 64);		/* Next AC element */
;;;543    
;;;544    		if (JD_USE_SCALE && jd->scale == 3)
;;;545    			*bp = (*tmp / 256) + 128;	/* If scale ratio is 1/8, IDCT can be ommited and only DC element is used */
;;;546    		else
;;;547    			block_idct(tmp, bp);		/* Apply IDCT and store the block to the MCU buffer */
;;;548    
;;;549    		bp += 64;				/* Next block */
;;;550    	}
;;;551    
;;;552    	return JDR_OK;	/* All blocks have been loaded successfully */
;;;553    }
000076  b009              ADD      sp,sp,#0x24
000078  e8bd8ff0          POP      {r4-r11,pc}
                  |L15.124|
00007c  f1040014          ADD      r0,r4,#0x14           ;507
000080  9905              LDR      r1,[sp,#0x14]         ;507
000082  f9306011          LDRSH    r6,[r0,r1,LSL #1]     ;507
000086  b1f5              CBZ      r5,|L15.198|
000088  4629              MOV      r1,r5                 ;509
00008a  4620              MOV      r0,r4                 ;509
00008c  f7fffffe          BL       bitext
000090  4682              MOV      r10,r0                ;509
000092  f1ba0f00          CMP      r10,#0                ;510
000096  da03              BGE      |L15.160|
000098  f1ca0000          RSB      r0,r10,#0             ;510
00009c  b2c0              UXTB     r0,r0                 ;510
00009e  e7ea              B        |L15.118|
                  |L15.160|
0000a0  1e68              SUBS     r0,r5,#1              ;511
0000a2  2101              MOVS     r1,#1                 ;511
0000a4  fa01f500          LSL      r5,r1,r0              ;511
0000a8  ea0a0005          AND      r0,r10,r5             ;512
0000ac  b920              CBNZ     r0,|L15.184|
0000ae  2001              MOVS     r0,#1                 ;512
0000b0  ebc00045          RSB      r0,r0,r5,LSL #1       ;512
0000b4  ebaa0a00          SUB      r10,r10,r0            ;512
                  |L15.184|
0000b8  4456              ADD      r6,r6,r10             ;513
0000ba  b232              SXTH     r2,r6                 ;514
0000bc  f1040014          ADD      r0,r4,#0x14           ;514
0000c0  9905              LDR      r1,[sp,#0x14]         ;514
0000c2  f8202011          STRH     r2,[r0,r1,LSL #1]     ;514
                  |L15.198|
0000c6  f1040010          ADD      r0,r4,#0x10           ;516
0000ca  9905              LDR      r1,[sp,#0x14]         ;516
0000cc  5c41              LDRB     r1,[r0,r1]            ;516
0000ce  3044              ADDS     r0,r0,#0x44           ;516
0000d0  f8500021          LDR      r0,[r0,r1,LSL #2]     ;516
0000d4  9000              STR      r0,[sp,#0]            ;516
0000d6  9800              LDR      r0,[sp,#0]            ;517
0000d8  6800              LDR      r0,[r0,#0]            ;517
0000da  4370              MULS     r0,r6,r0              ;517
0000dc  1200              ASRS     r0,r0,#8              ;517
0000de  f8c90000          STR      r0,[r9,#0]            ;517
0000e2  2701              MOVS     r7,#1                 ;520
0000e4  e003              B        |L15.238|
                  |L15.230|
0000e6  2000              MOVS     r0,#0                 ;520
0000e8  f8490027          STR      r0,[r9,r7,LSL #2]     ;520
0000ec  1c7f              ADDS     r7,r7,#1              ;520
                  |L15.238|
0000ee  2f40              CMP      r7,#0x40              ;520
0000f0  d3f9              BCC      |L15.230|
0000f2  f1040024          ADD      r0,r4,#0x24           ;521
0000f6  eb0000c8          ADD      r0,r0,r8,LSL #3       ;521
0000fa  6840              LDR      r0,[r0,#4]            ;521
0000fc  9003              STR      r0,[sp,#0xc]          ;521
0000fe  f1040034          ADD      r0,r4,#0x34           ;522
000102  eb0000c8          ADD      r0,r0,r8,LSL #3       ;522
000106  6840              LDR      r0,[r0,#4]            ;522
000108  9001              STR      r0,[sp,#4]            ;522
00010a  f1040044          ADD      r0,r4,#0x44           ;523
00010e  eb0000c8          ADD      r0,r0,r8,LSL #3       ;523
000112  6840              LDR      r0,[r0,#4]            ;523
000114  9002              STR      r0,[sp,#8]            ;523
000116  2701              MOVS     r7,#1                 ;524
000118  bf00              NOP                            ;525
                  |L15.282|
00011a  4620              MOV      r0,r4                 ;526
00011c  e9dd2301          LDRD     r2,r3,[sp,#4]         ;526
000120  9903              LDR      r1,[sp,#0xc]          ;526
000122  f7fffffe          BL       huffext
000126  4605              MOV      r5,r0                 ;526
000128  b905              CBNZ     r5,|L15.300|
00012a  e037              B        |L15.412|
                  |L15.300|
00012c  2d00              CMP      r5,#0                 ;528
00012e  da02              BGE      |L15.310|
000130  4268              RSBS     r0,r5,#0              ;528
000132  b2c0              UXTB     r0,r0                 ;528
000134  e79f              B        |L15.118|
                  |L15.310|
000136  0928              LSRS     r0,r5,#4              ;529
000138  9006              STR      r0,[sp,#0x18]         ;529
00013a  9806              LDR      r0,[sp,#0x18]         ;530
00013c  b128              CBZ      r0,|L15.330|
00013e  9806              LDR      r0,[sp,#0x18]         ;531
000140  4407              ADD      r7,r7,r0              ;531
000142  2f40              CMP      r7,#0x40              ;532
000144  d301              BCC      |L15.330|
000146  2006              MOVS     r0,#6                 ;532
000148  e795              B        |L15.118|
                  |L15.330|
00014a  f005000f          AND      r0,r5,#0xf            ;534
00014e  1e05              SUBS     r5,r0,#0              ;534
000150  d020              BEQ      |L15.404|
000152  4629              MOV      r1,r5                 ;535
000154  4620              MOV      r0,r4                 ;535
000156  f7fffffe          BL       bitext
00015a  4606              MOV      r6,r0                 ;535
00015c  2e00              CMP      r6,#0                 ;536
00015e  da02              BGE      |L15.358|
000160  4270              RSBS     r0,r6,#0              ;536
000162  b2c0              UXTB     r0,r0                 ;536
000164  e787              B        |L15.118|
                  |L15.358|
000166  1e68              SUBS     r0,r5,#1              ;537
000168  2101              MOVS     r1,#1                 ;537
00016a  fa01f500          LSL      r5,r1,r0              ;537
00016e  ea060005          AND      r0,r6,r5              ;538
000172  b918              CBNZ     r0,|L15.380|
000174  2001              MOVS     r0,#1                 ;538
000176  ebc00045          RSB      r0,r0,r5,LSL #1       ;538
00017a  1a36              SUBS     r6,r6,r0              ;538
                  |L15.380|
00017c  4817              LDR      r0,|L15.476|
00017e  5dc0              LDRB     r0,[r0,r7]            ;539
000180  9006              STR      r0,[sp,#0x18]         ;539
000182  9906              LDR      r1,[sp,#0x18]         ;540
000184  9800              LDR      r0,[sp,#0]            ;540
000186  f8500021          LDR      r0,[r0,r1,LSL #2]     ;540
00018a  4370              MULS     r0,r6,r0              ;540
00018c  1201              ASRS     r1,r0,#8              ;540
00018e  9806              LDR      r0,[sp,#0x18]         ;540
000190  f8491020          STR      r1,[r9,r0,LSL #2]     ;540
                  |L15.404|
000194  1c78              ADDS     r0,r7,#1              ;542
000196  4607              MOV      r7,r0                 ;542
000198  2840              CMP      r0,#0x40              ;542
00019a  d3be              BCC      |L15.282|
                  |L15.412|
00019c  bf00              NOP                            ;527
00019e  7b60              LDRB     r0,[r4,#0xd]          ;544
0001a0  2803              CMP      r0,#3                 ;544
0001a2  d10a              BNE      |L15.442|
0001a4  f8d90000          LDR      r0,[r9,#0]            ;545
0001a8  17c1              ASRS     r1,r0,#31             ;545
0001aa  eb006111          ADD      r1,r0,r1,LSR #24      ;545
0001ae  1209              ASRS     r1,r1,#8              ;545
0001b0  3180              ADDS     r1,r1,#0x80           ;545
0001b2  b2ca              UXTB     r2,r1                 ;545
0001b4  9904              LDR      r1,[sp,#0x10]         ;545
0001b6  700a              STRB     r2,[r1,#0]            ;545
0001b8  e003              B        |L15.450|
                  |L15.442|
0001ba  4648              MOV      r0,r9                 ;547
0001bc  9904              LDR      r1,[sp,#0x10]         ;547
0001be  f7fffffe          BL       block_idct
                  |L15.450|
0001c2  9804              LDR      r0,[sp,#0x10]         ;549
0001c4  3040              ADDS     r0,r0,#0x40           ;549
0001c6  9004              STR      r0,[sp,#0x10]         ;549
0001c8  f10b0b01          ADD      r11,r11,#1            ;497
                  |L15.460|
0001cc  e9dd1007          LDRD     r1,r0,[sp,#0x1c]      ;497
0001d0  4408              ADD      r0,r0,r1              ;497
0001d2  4558              CMP      r0,r11                ;497
0001d4  f63faf25          BHI      |L15.34|
0001d8  2000              MOVS     r0,#0                 ;552
0001da  e74c              B        |L15.118|
;;;554    
                          ENDP

                  |L15.476|
                          DCD      Zig

                          AREA ||i.mcu_output||, CODE, READONLY, ALIGN=2

                  mcu_output PROC
;;;561    static
;;;562    JRESULT mcu_output (
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;563    	JDEC* jd,	/* Pointer to the decompressor object */
;;;564    	UINT (*outfunc)(JDEC*, void*, JRECT*),	/* RGB output function */
;;;565    	UINT x,		/* MCU position in the image (left of the MCU) */
;;;566    	UINT y		/* MCU position in the image (top of the MCU) */
;;;567    )
;;;568    {
000004  b08d              SUB      sp,sp,#0x34
000006  4604              MOV      r4,r0
;;;569    	const INT CVACC = (sizeof (INT) > 2) ? 1024 : 128;
000008  f44f6080          MOV      r0,#0x400
00000c  900c              STR      r0,[sp,#0x30]
;;;570    	UINT ix, iy, mx, my, rx, ry;
;;;571    	INT yy, cb, cr;
;;;572    	BYTE *py, *pc, *rgb24;
;;;573    	JRECT rect;
;;;574    
;;;575    
;;;576    	mx = jd->msx * 8; my = jd->msy * 8;					/* MCU size (pixel) */
00000e  7ba0              LDRB     r0,[r4,#0xe]
000010  00c7              LSLS     r7,r0,#3
000012  7be0              LDRB     r0,[r4,#0xf]
000014  00c0              LSLS     r0,r0,#3
000016  900b              STR      r0,[sp,#0x2c]
;;;577    	rx = (x + mx <= jd->width) ? mx : jd->width - x;	/* Output rectangular size (it may be clipped at right/bottom end) */
000018  980f              LDR      r0,[sp,#0x3c]
00001a  4438              ADD      r0,r0,r7
00001c  69e1              LDR      r1,[r4,#0x1c]
00001e  4288              CMP      r0,r1
000020  d801              BHI      |L16.38|
000022  4638              MOV      r0,r7
000024  e002              B        |L16.44|
                  |L16.38|
000026  69e1              LDR      r1,[r4,#0x1c]
000028  980f              LDR      r0,[sp,#0x3c]
00002a  1a08              SUBS     r0,r1,r0
                  |L16.44|
00002c  4683              MOV      r11,r0
;;;578    	ry = (y + my <= jd->height) ? my : jd->height - y;
00002e  990b              LDR      r1,[sp,#0x2c]
000030  9810              LDR      r0,[sp,#0x40]
000032  4408              ADD      r0,r0,r1
000034  6a21              LDR      r1,[r4,#0x20]
000036  4288              CMP      r0,r1
000038  d801              BHI      |L16.62|
00003a  980b              LDR      r0,[sp,#0x2c]
00003c  e002              B        |L16.68|
                  |L16.62|
00003e  6a21              LDR      r1,[r4,#0x20]
000040  9810              LDR      r0,[sp,#0x40]
000042  1a08              SUBS     r0,r1,r0
                  |L16.68|
000044  900a              STR      r0,[sp,#0x28]
;;;579    	if (JD_USE_SCALE) {
;;;580    		rx >>= jd->scale; ry >>= jd->scale;
000046  7b60              LDRB     r0,[r4,#0xd]
000048  fa2bfb00          LSR      r11,r11,r0
00004c  7b61              LDRB     r1,[r4,#0xd]
00004e  980a              LDR      r0,[sp,#0x28]
000050  40c8              LSRS     r0,r0,r1
000052  900a              STR      r0,[sp,#0x28]
;;;581    		if (!rx || !ry) return JDR_OK;					/* Skip this MCU if all pixel is to be rounded off */
000054  f1bb0f00          CMP      r11,#0
000058  d001              BEQ      |L16.94|
00005a  980a              LDR      r0,[sp,#0x28]
00005c  b918              CBNZ     r0,|L16.102|
                  |L16.94|
00005e  2000              MOVS     r0,#0
                  |L16.96|
;;;582    		x >>= jd->scale; y >>= jd->scale;
;;;583    	}
;;;584    	rect.left = x; rect.right = x + rx - 1;				/* Rectangular area in the frame buffer */
;;;585    	rect.top = y; rect.bottom = y + ry - 1;
;;;586    
;;;587    
;;;588    	if (!JD_USE_SCALE || jd->scale != 3) {	/* Not for 1/8 scaling */
;;;589    
;;;590    		/* Build an RGB MCU from discrete comopnents */
;;;591    		rgb24 = (BYTE*)jd->workbuf;
;;;592    		for (iy = 0; iy < my; iy++) {
;;;593    			pc = jd->mcubuf;
;;;594    			py = pc + iy * 8;
;;;595    			if (my == 16) {		/* Double block height? */
;;;596    				pc += 64 * 4 + (iy >> 1) * 8;
;;;597    				if (iy >= 8) py += 64;
;;;598    			} else {			/* Single block height */
;;;599    				pc += mx * 8 + iy * 8;
;;;600    			}
;;;601    			for (ix = 0; ix < mx; ix++) {
;;;602    				cb = pc[0] - 128; 	/* Get Cb/Cr component and restore right level */
;;;603    				cr = pc[64] - 128;
;;;604    				if (mx == 16) {					/* Double block width? */
;;;605    					if (ix == 8) py += 64 - 8;	/* Jump to next block if double block heigt */
;;;606    					pc += ix & 1;				/* Increase chroma pointer every two pixels */
;;;607    				} else {						/* Single block width */
;;;608    					pc++;						/* Increase chroma pointer every pixel */
;;;609    				}
;;;610    				yy = *py++;			/* Get Y component */
;;;611    
;;;612    				/* Convert YCbCr to RGB */
;;;613    				*rgb24++ = /* R */ BYTECLIP(yy + ((INT)(1.402 * CVACC) * cr) / CVACC);
;;;614    				*rgb24++ = /* G */ BYTECLIP(yy - ((INT)(0.344 * CVACC) * cb + (INT)(0.714 * CVACC) * cr) / CVACC);
;;;615    				*rgb24++ = /* B */ BYTECLIP(yy + ((INT)(1.772 * CVACC) * cb) / CVACC);
;;;616    			}
;;;617    		}
;;;618    
;;;619    		/* Descale the MCU rectangular if needed */
;;;620    		if (JD_USE_SCALE && jd->scale) {
;;;621    			UINT x, y, r, g, b, s, w, a;
;;;622    			BYTE *op;
;;;623    
;;;624    			/* Get averaged RGB value of each square correcponds to a pixel */
;;;625    			s = jd->scale * 2;	/* Bumber of shifts for averaging */
;;;626    			w = 1 << jd->scale;	/* Width of square */
;;;627    			a = (mx - w) * 3;	/* Bytes to skip for next line in the square */
;;;628    			op = (BYTE*)jd->workbuf;
;;;629    			for (iy = 0; iy < my; iy += w) {
;;;630    				for (ix = 0; ix < mx; ix += w) {
;;;631    					rgb24 = (BYTE*)jd->workbuf + (iy * mx + ix) * 3;
;;;632    					r = g = b = 0;
;;;633    					for (y = 0; y < w; y++) {	/* Accumulate RGB value in the square */
;;;634    						for (x = 0; x < w; x++) {
;;;635    							r += *rgb24++;
;;;636    							g += *rgb24++;
;;;637    							b += *rgb24++;
;;;638    						}
;;;639    						rgb24 += a;
;;;640    					}							/* Put the averaged RGB value as a pixel */
;;;641    					*op++ = (BYTE)(r >> s);
;;;642    					*op++ = (BYTE)(g >> s);
;;;643    					*op++ = (BYTE)(b >> s);
;;;644    				}
;;;645    			}
;;;646    		}
;;;647    
;;;648    	} else {	/* For only 1/8 scaling (left-top pixel in each block are the DC value of the block) */
;;;649    
;;;650    		/* Build a 1/8 descaled RGB MCU from discrete comopnents */
;;;651    		rgb24 = (BYTE*)jd->workbuf;
;;;652    		pc = jd->mcubuf + mx * my;
;;;653    		cb = pc[0] - 128;		/* Get Cb/Cr component and restore right level */
;;;654    		cr = pc[64] - 128;
;;;655    		for (iy = 0; iy < my; iy += 8) {
;;;656    			py = jd->mcubuf;
;;;657    			if (iy == 8) py += 64 * 2;
;;;658    			for (ix = 0; ix < mx; ix += 8) {
;;;659    				yy = *py;	/* Get Y component */
;;;660    				py += 64;
;;;661    
;;;662    				/* Convert YCbCr to RGB */
;;;663    				*rgb24++ = /* R */ BYTECLIP(yy + ((INT)(1.402 * CVACC) * cr / CVACC));
;;;664    				*rgb24++ = /* G */ BYTECLIP(yy - ((INT)(0.344 * CVACC) * cb + (INT)(0.714 * CVACC) * cr) / CVACC);
;;;665    				*rgb24++ = /* B */ BYTECLIP(yy + ((INT)(1.772 * CVACC) * cb / CVACC));
;;;666    			}
;;;667    		}
;;;668    	}
;;;669    
;;;670    	/* Squeeze up pixel table if a part of MCU is to be truncated */
;;;671    	mx >>= jd->scale;
;;;672    	if (rx < mx) {
;;;673    		BYTE *s, *d;
;;;674    		UINT x, y;
;;;675    
;;;676    		s = d = (BYTE*)jd->workbuf;
;;;677    		for (y = 0; y < ry; y++) {
;;;678    			for (x = 0; x < rx; x++) {	/* Copy effective pixels */
;;;679    				*d++ = *s++;
;;;680    				*d++ = *s++;
;;;681    				*d++ = *s++;
;;;682    			}
;;;683    			s += (mx - rx) * 3;	/* Skip truncated pixels */
;;;684    		}
;;;685    	}
;;;686    
;;;687    	/* Convert RGB888 to RGB565 if needed */
;;;688    	if (JD_FORMAT == 1) {
;;;689    		BYTE *s = (BYTE*)jd->workbuf;
;;;690    		WORD w, *d = (WORD*)s;
;;;691    		UINT n = rx * ry;
;;;692    
;;;693    		do {
;;;694    			w = (*s++ & 0xF8) << 8;		/* RRRRR----------- */
;;;695    			w |= (*s++ & 0xFC) << 3;	/* -----GGGGGG----- */
;;;696    			w |= *s++ >> 3;				/* -----------BBBBB */
;;;697    			*d++ = w;
;;;698    		} while (--n);
;;;699    	}
;;;700    
;;;701    	/* Output the RGB rectangular */
;;;702    	return (JRESULT)outfunc(jd, jd->workbuf,&rect); //,
;;;703    }
000060  b011              ADD      sp,sp,#0x44
000062  e8bd8ff0          POP      {r4-r11,pc}
                  |L16.102|
000066  7b61              LDRB     r1,[r4,#0xd]          ;582
000068  980f              LDR      r0,[sp,#0x3c]         ;582
00006a  40c8              LSRS     r0,r0,r1              ;582
00006c  900f              STR      r0,[sp,#0x3c]         ;582
00006e  7b61              LDRB     r1,[r4,#0xd]          ;582
000070  9810              LDR      r0,[sp,#0x40]         ;582
000072  40c8              LSRS     r0,r0,r1              ;582
000074  9010              STR      r0,[sp,#0x40]         ;582
000076  980f              LDR      r0,[sp,#0x3c]         ;584
000078  b280              UXTH     r0,r0                 ;584
00007a  f8ad0014          STRH     r0,[sp,#0x14]         ;584
00007e  980f              LDR      r0,[sp,#0x3c]         ;584
000080  4458              ADD      r0,r0,r11             ;584
000082  1e40              SUBS     r0,r0,#1              ;584
000084  b280              UXTH     r0,r0                 ;584
000086  f8ad0016          STRH     r0,[sp,#0x16]         ;584
00008a  9810              LDR      r0,[sp,#0x40]         ;585
00008c  b280              UXTH     r0,r0                 ;585
00008e  f8ad0018          STRH     r0,[sp,#0x18]         ;585
000092  990a              LDR      r1,[sp,#0x28]         ;585
000094  9810              LDR      r0,[sp,#0x40]         ;585
000096  4408              ADD      r0,r0,r1              ;585
000098  1e40              SUBS     r0,r0,#1              ;585
00009a  b280              UXTH     r0,r0                 ;585
00009c  f8ad001a          STRH     r0,[sp,#0x1a]         ;585
0000a0  7b60              LDRB     r0,[r4,#0xd]          ;588
0000a2  2803              CMP      r0,#3                 ;588
0000a4  d07d              BEQ      |L16.418|
0000a6  6e65              LDR      r5,[r4,#0x64]         ;591
0000a8  2600              MOVS     r6,#0                 ;592
0000aa  e06e              B        |L16.394|
                  |L16.172|
0000ac  f8d48068          LDR      r8,[r4,#0x68]         ;593
0000b0  eb0800c6          ADD      r0,r8,r6,LSL #3       ;594
0000b4  9007              STR      r0,[sp,#0x1c]         ;594
0000b6  980b              LDR      r0,[sp,#0x2c]         ;595
0000b8  2810              CMP      r0,#0x10              ;595
0000ba  d10b              BNE      |L16.212|
0000bc  0870              LSRS     r0,r6,#1              ;596
0000be  f44f7180          MOV      r1,#0x100             ;596
0000c2  eb0100c0          ADD      r0,r1,r0,LSL #3       ;596
0000c6  4480              ADD      r8,r8,r0              ;596
0000c8  2e08              CMP      r6,#8                 ;597
0000ca  d307              BCC      |L16.220|
0000cc  9807              LDR      r0,[sp,#0x1c]         ;597
0000ce  3040              ADDS     r0,r0,#0x40           ;597
0000d0  9007              STR      r0,[sp,#0x1c]         ;597
0000d2  e003              B        |L16.220|
                  |L16.212|
0000d4  00f8              LSLS     r0,r7,#3              ;599
0000d6  eb0000c6          ADD      r0,r0,r6,LSL #3       ;599
0000da  4480              ADD      r8,r8,r0              ;599
                  |L16.220|
0000dc  f04f0900          MOV      r9,#0                 ;601
0000e0  e050              B        |L16.388|
                  |L16.226|
0000e2  f8980000          LDRB     r0,[r8,#0]            ;602
0000e6  3880              SUBS     r0,r0,#0x80           ;602
0000e8  9009              STR      r0,[sp,#0x24]         ;602
0000ea  f8980040          LDRB     r0,[r8,#0x40]         ;603
0000ee  3880              SUBS     r0,r0,#0x80           ;603
0000f0  9008              STR      r0,[sp,#0x20]         ;603
0000f2  2f10              CMP      r7,#0x10              ;604
0000f4  d109              BNE      |L16.266|
0000f6  f1b90f08          CMP      r9,#8                 ;605
0000fa  d102              BNE      |L16.258|
0000fc  9807              LDR      r0,[sp,#0x1c]         ;605
0000fe  3038              ADDS     r0,r0,#0x38           ;605
000100  9007              STR      r0,[sp,#0x1c]         ;605
                  |L16.258|
000102  f0090001          AND      r0,r9,#1              ;606
000106  4480              ADD      r8,r8,r0              ;606
000108  e001              B        |L16.270|
                  |L16.266|
00010a  f1080801          ADD      r8,r8,#1              ;608
                  |L16.270|
00010e  9807              LDR      r0,[sp,#0x1c]         ;610
000110  f810ab01          LDRB     r10,[r0],#1           ;610
000114  9007              STR      r0,[sp,#0x1c]         ;610
000116  f240529b          MOV      r2,#0x59b             ;613
00011a  9908              LDR      r1,[sp,#0x20]         ;613
00011c  fb01f002          MUL      r0,r1,r2              ;613
000120  17c1              ASRS     r1,r0,#31             ;613
000122  eb005191          ADD      r1,r0,r1,LSR #22      ;613
000126  eb0a21a1          ADD      r1,r10,r1,ASR #10     ;613
00012a  f3c10109          UBFX     r1,r1,#0,#10          ;613
00012e  4a98              LDR      r2,|L16.912|
000130  5c51              LDRB     r1,[r2,r1]            ;613
000132  f8051b01          STRB     r1,[r5],#1            ;613
000136  f44f72b0          MOV      r2,#0x160             ;614
00013a  9909              LDR      r1,[sp,#0x24]         ;614
00013c  4351              MULS     r1,r2,r1              ;614
00013e  f24023db          MOV      r3,#0x2db             ;614
000142  9a08              LDR      r2,[sp,#0x20]         ;614
000144  fb031002          MLA      r0,r3,r2,r1           ;614
000148  17c1              ASRS     r1,r0,#31             ;614
00014a  eb005191          ADD      r1,r0,r1,LSR #22      ;614
00014e  ebaa21a1          SUB      r1,r10,r1,ASR #10     ;614
000152  f3c10109          UBFX     r1,r1,#0,#10          ;614
000156  4a8e              LDR      r2,|L16.912|
000158  5c51              LDRB     r1,[r2,r1]            ;614
00015a  f8051b01          STRB     r1,[r5],#1            ;614
00015e  f2407216          MOV      r2,#0x716             ;615
000162  9909              LDR      r1,[sp,#0x24]         ;615
000164  fb01f002          MUL      r0,r1,r2              ;615
000168  17c1              ASRS     r1,r0,#31             ;615
00016a  eb005191          ADD      r1,r0,r1,LSR #22      ;615
00016e  eb0a21a1          ADD      r1,r10,r1,ASR #10     ;615
000172  f3c10109          UBFX     r1,r1,#0,#10          ;615
000176  4a86              LDR      r2,|L16.912|
000178  5c51              LDRB     r1,[r2,r1]            ;615
00017a  7029              STRB     r1,[r5,#0]            ;615
00017c  1c69              ADDS     r1,r5,#1              ;615
00017e  460d              MOV      r5,r1                 ;615
000180  f1090901          ADD      r9,r9,#1              ;601
                  |L16.388|
000184  45b9              CMP      r9,r7                 ;601
000186  d3ac              BCC      |L16.226|
000188  1c76              ADDS     r6,r6,#1              ;592
                  |L16.394|
00018a  980b              LDR      r0,[sp,#0x2c]         ;592
00018c  4286              CMP      r6,r0                 ;592
00018e  d38d              BCC      |L16.172|
000190  7b60              LDRB     r0,[r4,#0xd]          ;620
000192  2800              CMP      r0,#0                 ;620
000194  d053              BEQ      |L16.574|
000196  7b63              LDRB     r3,[r4,#0xd]          ;625
000198  005a              LSLS     r2,r3,#1              ;625
00019a  f894e00d          LDRB     lr,[r4,#0xd]          ;626
00019e  2301              MOVS     r3,#1                 ;626
0001a0  e000              B        |L16.420|
                  |L16.418|
0001a2  e04d              B        |L16.576|
                  |L16.420|
0001a4  fa03f10e          LSL      r1,r3,lr              ;626
0001a8  1a7b              SUBS     r3,r7,r1              ;627
0001aa  eb030343          ADD      r3,r3,r3,LSL #1       ;627
0001ae  9300              STR      r3,[sp,#0]            ;627
0001b0  6e60              LDR      r0,[r4,#0x64]         ;628
0001b2  2600              MOVS     r6,#0                 ;629
0001b4  e040              B        |L16.568|
                  |L16.438|
0001b6  f04f0900          MOV      r9,#0                 ;630
0001ba  e03a              B        |L16.562|
                  |L16.444|
0001bc  fb069e07          MLA      lr,r6,r7,r9           ;631
0001c0  eb0e0e4e          ADD      lr,lr,lr,LSL #1       ;631
0001c4  6e63              LDR      r3,[r4,#0x64]         ;631
0001c6  eb03050e          ADD      r5,r3,lr              ;631
0001ca  2300              MOVS     r3,#0                 ;632
0001cc  9301              STR      r3,[sp,#4]            ;632
0001ce  9302              STR      r3,[sp,#8]            ;632
0001d0  9303              STR      r3,[sp,#0xc]          ;632
0001d2  9304              STR      r3,[sp,#0x10]         ;633
0001d4  e01d              B        |L16.530|
                  |L16.470|
0001d6  f04f0c00          MOV      r12,#0                ;634
0001da  e013              B        |L16.516|
                  |L16.476|
0001dc  f8153b01          LDRB     r3,[r5],#1            ;635
0001e0  f8dde00c          LDR      lr,[sp,#0xc]          ;635
0001e4  4473              ADD      r3,r3,lr              ;635
0001e6  9303              STR      r3,[sp,#0xc]          ;635
0001e8  f8153b01          LDRB     r3,[r5],#1            ;636
0001ec  f8dde008          LDR      lr,[sp,#8]            ;636
0001f0  4473              ADD      r3,r3,lr              ;636
0001f2  9302              STR      r3,[sp,#8]            ;636
0001f4  f8153b01          LDRB     r3,[r5],#1            ;637
0001f8  f8dde004          LDR      lr,[sp,#4]            ;637
0001fc  4473              ADD      r3,r3,lr              ;637
0001fe  9301              STR      r3,[sp,#4]            ;637
000200  f10c0c01          ADD      r12,r12,#1            ;634
                  |L16.516|
000204  458c              CMP      r12,r1                ;634
000206  d3e9              BCC      |L16.476|
000208  9b00              LDR      r3,[sp,#0]            ;639
00020a  441d              ADD      r5,r5,r3              ;639
00020c  9b04              LDR      r3,[sp,#0x10]         ;633
00020e  1c5b              ADDS     r3,r3,#1              ;633
000210  9304              STR      r3,[sp,#0x10]         ;633
                  |L16.530|
000212  9b04              LDR      r3,[sp,#0x10]         ;633
000214  428b              CMP      r3,r1                 ;633
000216  d3de              BCC      |L16.470|
000218  9b03              LDR      r3,[sp,#0xc]          ;641
00021a  40d3              LSRS     r3,r3,r2              ;641
00021c  f8003b01          STRB     r3,[r0],#1            ;641
000220  9b02              LDR      r3,[sp,#8]            ;642
000222  40d3              LSRS     r3,r3,r2              ;642
000224  f8003b01          STRB     r3,[r0],#1            ;642
000228  9b01              LDR      r3,[sp,#4]            ;643
00022a  40d3              LSRS     r3,r3,r2              ;643
00022c  f8003b01          STRB     r3,[r0],#1            ;643
000230  4489              ADD      r9,r9,r1              ;630
                  |L16.562|
000232  45b9              CMP      r9,r7                 ;630
000234  d3c2              BCC      |L16.444|
000236  440e              ADD      r6,r6,r1              ;629
                  |L16.568|
000238  9b0b              LDR      r3,[sp,#0x2c]         ;629
00023a  429e              CMP      r6,r3                 ;629
00023c  d3bb              BCC      |L16.438|
                  |L16.574|
00023e  e05b              B        |L16.760|
                  |L16.576|
000240  6e65              LDR      r5,[r4,#0x64]         ;651
000242  6ea1              LDR      r1,[r4,#0x68]         ;652
000244  980b              LDR      r0,[sp,#0x2c]         ;652
000246  fb071800          MLA      r8,r7,r0,r1           ;652
00024a  f8980000          LDRB     r0,[r8,#0]            ;653
00024e  3880              SUBS     r0,r0,#0x80           ;653
000250  9009              STR      r0,[sp,#0x24]         ;653
000252  f8980040          LDRB     r0,[r8,#0x40]         ;654
000256  3880              SUBS     r0,r0,#0x80           ;654
000258  9008              STR      r0,[sp,#0x20]         ;654
00025a  2600              MOVS     r6,#0                 ;655
00025c  e049              B        |L16.754|
                  |L16.606|
00025e  6ea0              LDR      r0,[r4,#0x68]         ;656
000260  9007              STR      r0,[sp,#0x1c]         ;656
000262  2e08              CMP      r6,#8                 ;657
000264  d102              BNE      |L16.620|
000266  9807              LDR      r0,[sp,#0x1c]         ;657
000268  3080              ADDS     r0,r0,#0x80           ;657
00026a  9007              STR      r0,[sp,#0x1c]         ;657
                  |L16.620|
00026c  f04f0900          MOV      r9,#0                 ;658
000270  e03c              B        |L16.748|
                  |L16.626|
000272  9807              LDR      r0,[sp,#0x1c]         ;659
000274  f890a000          LDRB     r10,[r0,#0]           ;659
000278  9807              LDR      r0,[sp,#0x1c]         ;660
00027a  3040              ADDS     r0,r0,#0x40           ;660
00027c  9007              STR      r0,[sp,#0x1c]         ;660
00027e  f240529b          MOV      r2,#0x59b             ;663
000282  9908              LDR      r1,[sp,#0x20]         ;663
000284  fb01f002          MUL      r0,r1,r2              ;663
000288  17c1              ASRS     r1,r0,#31             ;663
00028a  eb005191          ADD      r1,r0,r1,LSR #22      ;663
00028e  eb0a21a1          ADD      r1,r10,r1,ASR #10     ;663
000292  f3c10109          UBFX     r1,r1,#0,#10          ;663
000296  4a3e              LDR      r2,|L16.912|
000298  5c51              LDRB     r1,[r2,r1]            ;663
00029a  f8051b01          STRB     r1,[r5],#1            ;663
00029e  f44f72b0          MOV      r2,#0x160             ;664
0002a2  9909              LDR      r1,[sp,#0x24]         ;664
0002a4  4351              MULS     r1,r2,r1              ;664
0002a6  f24023db          MOV      r3,#0x2db             ;664
0002aa  9a08              LDR      r2,[sp,#0x20]         ;664
0002ac  fb031002          MLA      r0,r3,r2,r1           ;664
0002b0  17c1              ASRS     r1,r0,#31             ;664
0002b2  eb005191          ADD      r1,r0,r1,LSR #22      ;664
0002b6  ebaa21a1          SUB      r1,r10,r1,ASR #10     ;664
0002ba  f3c10109          UBFX     r1,r1,#0,#10          ;664
0002be  4a34              LDR      r2,|L16.912|
0002c0  5c51              LDRB     r1,[r2,r1]            ;664
0002c2  f8051b01          STRB     r1,[r5],#1            ;664
0002c6  f2407216          MOV      r2,#0x716             ;665
0002ca  9909              LDR      r1,[sp,#0x24]         ;665
0002cc  fb01f002          MUL      r0,r1,r2              ;665
0002d0  17c1              ASRS     r1,r0,#31             ;665
0002d2  eb005191          ADD      r1,r0,r1,LSR #22      ;665
0002d6  eb0a21a1          ADD      r1,r10,r1,ASR #10     ;665
0002da  f3c10109          UBFX     r1,r1,#0,#10          ;665
0002de  4a2c              LDR      r2,|L16.912|
0002e0  5c51              LDRB     r1,[r2,r1]            ;665
0002e2  7029              STRB     r1,[r5,#0]            ;665
0002e4  1c69              ADDS     r1,r5,#1              ;665
0002e6  460d              MOV      r5,r1                 ;665
0002e8  f1090908          ADD      r9,r9,#8              ;658
                  |L16.748|
0002ec  45b9              CMP      r9,r7                 ;658
0002ee  d3c0              BCC      |L16.626|
0002f0  3608              ADDS     r6,r6,#8              ;655
                  |L16.754|
0002f2  980b              LDR      r0,[sp,#0x2c]         ;655
0002f4  4286              CMP      r6,r0                 ;655
0002f6  d3b2              BCC      |L16.606|
                  |L16.760|
0002f8  7b60              LDRB     r0,[r4,#0xd]          ;671
0002fa  40c7              LSRS     r7,r7,r0              ;671
0002fc  45bb              CMP      r11,r7                ;672
0002fe  d221              BCS      |L16.836|
000300  f8d4c064          LDR      r12,[r4,#0x64]        ;676
000304  4661              MOV      r1,r12                ;676
000306  4660              MOV      r0,r12                ;676
000308  2300              MOVS     r3,#0                 ;677
00030a  e016              B        |L16.826|
                  |L16.780|
00030c  2200              MOVS     r2,#0                 ;678
00030e  e00c              B        |L16.810|
                  |L16.784|
000310  f810cb01          LDRB     r12,[r0],#1           ;679
000314  f801cb01          STRB     r12,[r1],#1           ;679
000318  f810cb01          LDRB     r12,[r0],#1           ;680
00031c  f801cb01          STRB     r12,[r1],#1           ;680
000320  f810cb01          LDRB     r12,[r0],#1           ;681
000324  f801cb01          STRB     r12,[r1],#1           ;681
000328  1c52              ADDS     r2,r2,#1              ;678
                  |L16.810|
00032a  455a              CMP      r2,r11                ;678
00032c  d3f0              BCC      |L16.784|
00032e  eba70c0b          SUB      r12,r7,r11            ;683
000332  eb0c0c4c          ADD      r12,r12,r12,LSL #1    ;683
000336  4460              ADD      r0,r0,r12             ;683
000338  1c5b              ADDS     r3,r3,#1              ;677
                  |L16.826|
00033a  f8ddc028          LDR      r12,[sp,#0x28]        ;677
00033e  4563              CMP      r3,r12                ;677
000340  d3e4              BCC      |L16.780|
000342  bf00              NOP                            ;685
                  |L16.836|
000344  6e60              LDR      r0,[r4,#0x64]         ;689
000346  4602              MOV      r2,r0                 ;690
000348  f8ddc028          LDR      r12,[sp,#0x28]        ;691
00034c  fb0bf30c          MUL      r3,r11,r12            ;691
000350  bf00              NOP                            ;693
                  |L16.850|
000352  f810cb01          LDRB     r12,[r0],#1           ;694
000356  f00c0cf8          AND      r12,r12,#0xf8         ;694
00035a  ea4f210c          LSL      r1,r12,#8             ;694
00035e  f810cb01          LDRB     r12,[r0],#1           ;695
000362  f00c0cfc          AND      r12,r12,#0xfc         ;695
000366  ea4101cc          ORR      r1,r1,r12,LSL #3      ;695
00036a  f810cb01          LDRB     r12,[r0],#1           ;696
00036e  ea4101ec          ORR      r1,r1,r12,ASR #3      ;696
000372  f8221b02          STRH     r1,[r2],#2            ;697
000376  f1a30c01          SUB      r12,r3,#1             ;698
00037a  f1bc0300          SUBS     r3,r12,#0             ;698
00037e  d1e8              BNE      |L16.850|
000380  aa05              ADD      r2,sp,#0x14           ;702
000382  4620              MOV      r0,r4                 ;702
000384  6e61              LDR      r1,[r4,#0x64]         ;702
000386  9b0e              LDR      r3,[sp,#0x38]         ;702
000388  4798              BLX      r3                    ;702
00038a  b2c0              UXTB     r0,r0                 ;702
00038c  e668              B        |L16.96|
;;;704    
                          ENDP

00038e  0000              DCW      0x0000
                  |L16.912|
                          DCD      Clip8

                          AREA ||i.restart||, CODE, READONLY, ALIGN=1

                  restart PROC
;;;712    static
;;;713    JRESULT restart (
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;714    	JDEC* jd,	/* Pointer to the decompressor object */
;;;715    	WORD rstn	/* Expected restert sequense number */
;;;716    )
;;;717    {
000004  4604              MOV      r4,r0
000006  4688              MOV      r8,r1
;;;718    	UINT i, dc;
;;;719    	WORD d;
;;;720    	BYTE *dp;
;;;721    
;;;722    
;;;723    	/* Discard padding bits and get two bytes from the input stream */
;;;724    	dp = jd->dptr; dc = jd->dctr;
000008  6866              LDR      r6,[r4,#4]
00000a  6825              LDR      r5,[r4,#0]
;;;725    	d = 0;
00000c  2700              MOVS     r7,#0
;;;726    	for (i = 0; i < 2; i++) {
00000e  46b9              MOV      r9,r7
000010  e014              B        |L17.60|
                  |L17.18|
;;;727    		if (!dc) {	/* No input data is available, re-fill input buffer */
000012  b95d              CBNZ     r5,|L17.44|
;;;728    			dp = jd->inbuf;
000014  68a6              LDR      r6,[r4,#8]
;;;729    			dc = jd->infunc(jd, dp, JD_SZBUF);
000016  f44f6280          MOV      r2,#0x400
00001a  4631              MOV      r1,r6
00001c  4620              MOV      r0,r4
00001e  6f63              LDR      r3,[r4,#0x74]
000020  4798              BLX      r3
000022  4605              MOV      r5,r0
;;;730    			if (!dc) return JDR_INP;
000024  b91d              CBNZ     r5,|L17.46|
000026  2002              MOVS     r0,#2
                  |L17.40|
;;;731    		} else {
;;;732    			dp++;
;;;733    		}
;;;734    		dc--;
;;;735    		d = (d << 8) | *dp;	/* Get a byte */
;;;736    	}
;;;737    	jd->dptr = dp; jd->dctr = dc; jd->dmsk = 0;
;;;738    
;;;739    	/* Check the marker */
;;;740    	if ((d & 0xFFD8) != 0xFFD0 || (d & 7) != (rstn & 7))
;;;741    		return JDR_FMT1;	/* Err: expected RSTn marker is not detected (may be collapted data) */
;;;742    
;;;743    	/* Reset DC offset */
;;;744    	jd->dcv[2] = jd->dcv[1] = jd->dcv[0] = 0;
;;;745    
;;;746    	return JDR_OK;
;;;747    }
000028  e8bd87f0          POP      {r4-r10,pc}
                  |L17.44|
00002c  1c76              ADDS     r6,r6,#1              ;732
                  |L17.46|
00002e  1e6d              SUBS     r5,r5,#1              ;734
000030  7830              LDRB     r0,[r6,#0]            ;735
000032  ea402007          ORR      r0,r0,r7,LSL #8       ;735
000036  b287              UXTH     r7,r0                 ;735
000038  f1090901          ADD      r9,r9,#1              ;726
                  |L17.60|
00003c  f1b90f02          CMP      r9,#2                 ;726
000040  d3e7              BCC      |L17.18|
000042  6066              STR      r6,[r4,#4]            ;737
000044  6025              STR      r5,[r4,#0]            ;737
000046  2000              MOVS     r0,#0                 ;737
000048  7320              STRB     r0,[r4,#0xc]          ;737
00004a  f64f70d8          MOV      r0,#0xffd8            ;740
00004e  4038              ANDS     r0,r0,r7              ;740
000050  f64f71d0          MOV      r1,#0xffd0            ;740
000054  4288              CMP      r0,r1                 ;740
000056  d103              BNE      |L17.96|
000058  0778              LSLS     r0,r7,#29             ;740
00005a  ebb07f48          CMP      r0,r8,LSL #29         ;740
00005e  d001              BEQ      |L17.100|
                  |L17.96|
000060  2006              MOVS     r0,#6                 ;741
000062  e7e1              B        |L17.40|
                  |L17.100|
000064  2100              MOVS     r1,#0                 ;744
000066  82a1              STRH     r1,[r4,#0x14]         ;744
000068  82e1              STRH     r1,[r4,#0x16]         ;744
00006a  8321              STRH     r1,[r4,#0x18]         ;744
00006c  2000              MOVS     r0,#0                 ;746
00006e  e7db              B        |L17.40|
;;;748    
                          ENDP


                          AREA ||.constdata||, DATA, READONLY, ALIGN=1

                  Zig
000000  00010810          DCB      0x00,0x01,0x08,0x10
000004  0902030a          DCB      0x09,0x02,0x03,0x0a
000008  11182019          DCB      0x11,0x18,0x20,0x19
00000c  120b0405          DCB      0x12,0x0b,0x04,0x05
000010  0c131a21          DCB      0x0c,0x13,0x1a,0x21
000014  28302922          DCB      0x28,0x30,0x29,0x22
000018  1b140d06          DCB      0x1b,0x14,0x0d,0x06
00001c  070e151c          DCB      0x07,0x0e,0x15,0x1c
000020  232a3138          DCB      0x23,0x2a,0x31,0x38
000024  39322b24          DCB      0x39,0x32,0x2b,0x24
000028  1d160f17          DCB      0x1d,0x16,0x0f,0x17
00002c  1e252c33          DCB      0x1e,0x25,0x2c,0x33
000030  3a3b342d          DCB      0x3a,0x3b,0x34,0x2d
000034  261f272e          DCB      0x26,0x1f,0x27,0x2e
000038  353c3d36          DCB      0x35,0x3c,0x3d,0x36
00003c  2f373e3f          DCB      0x2f,0x37,0x3e,0x3f
                  Ipsf
000040  20002c62          DCW      0x2000,0x2c62
000044  29cf25a0          DCW      0x29cf,0x25a0
000048  20001924          DCW      0x2000,0x1924
00004c  115108d4          DCW      0x1151,0x08d4
000050  2c623d90          DCW      0x2c62,0x3d90
000054  39fe3431          DCW      0x39fe,0x3431
000058  2c6222df          DCW      0x2c62,0x22df
00005c  18050c3e          DCW      0x1805,0x0c3e
000060  29cf39fe          DCW      0x29cf,0x39fe
000064  36a03129          DCW      0x36a0,0x3129
000068  29cf20d9          DCW      0x29cf,0x20d9
00006c  16a00b89          DCW      0x16a0,0x0b89
000070  25a03431          DCW      0x25a0,0x3431
000074  31292c3e          DCW      0x3129,0x2c3e
000078  25a01d90          DCW      0x25a0,0x1d90
00007c  145d0a61          DCW      0x145d,0x0a61
000080  20002c62          DCW      0x2000,0x2c62
000084  29cf25a0          DCW      0x29cf,0x25a0
000088  20001924          DCW      0x2000,0x1924
00008c  115108d4          DCW      0x1151,0x08d4
000090  192422df          DCW      0x1924,0x22df
000094  20d91d90          DCW      0x20d9,0x1d90
000098  192413c1          DCW      0x1924,0x13c1
00009c  0d9b06ef          DCW      0x0d9b,0x06ef
0000a0  11511805          DCW      0x1151,0x1805
0000a4  16a0145d          DCW      0x16a0,0x145d
0000a8  11510d9b          DCW      0x1151,0x0d9b
0000ac  095f04c7          DCW      0x095f,0x04c7
0000b0  08d40c3e          DCW      0x08d4,0x0c3e
0000b4  0b890a61          DCW      0x0b89,0x0a61
0000b8  08d406ef          DCW      0x08d4,0x06ef
0000bc  04c7026f          DCW      0x04c7,0x026f
                  Clip8
0000c0  00010203          DCB      0x00,0x01,0x02,0x03
0000c4  04050607          DCB      0x04,0x05,0x06,0x07
0000c8  08090a0b          DCB      0x08,0x09,0x0a,0x0b
0000cc  0c0d0e0f          DCB      0x0c,0x0d,0x0e,0x0f
0000d0  10111213          DCB      0x10,0x11,0x12,0x13
0000d4  14151617          DCB      0x14,0x15,0x16,0x17
0000d8  18191a1b          DCB      0x18,0x19,0x1a,0x1b
0000dc  1c1d1e1f          DCB      0x1c,0x1d,0x1e,0x1f
0000e0  20212223          DCB      0x20,0x21,0x22,0x23
0000e4  24252627          DCB      0x24,0x25,0x26,0x27
0000e8  28292a2b          DCB      0x28,0x29,0x2a,0x2b
0000ec  2c2d2e2f          DCB      0x2c,0x2d,0x2e,0x2f
0000f0  30313233          DCB      0x30,0x31,0x32,0x33
0000f4  34353637          DCB      0x34,0x35,0x36,0x37
0000f8  38393a3b          DCB      0x38,0x39,0x3a,0x3b
0000fc  3c3d3e3f          DCB      0x3c,0x3d,0x3e,0x3f
000100  40414243          DCB      0x40,0x41,0x42,0x43
000104  44454647          DCB      0x44,0x45,0x46,0x47
000108  48494a4b          DCB      0x48,0x49,0x4a,0x4b
00010c  4c4d4e4f          DCB      0x4c,0x4d,0x4e,0x4f
000110  50515253          DCB      0x50,0x51,0x52,0x53
000114  54555657          DCB      0x54,0x55,0x56,0x57
000118  58595a5b          DCB      0x58,0x59,0x5a,0x5b
00011c  5c5d5e5f          DCB      0x5c,0x5d,0x5e,0x5f
000120  60616263          DCB      0x60,0x61,0x62,0x63
000124  64656667          DCB      0x64,0x65,0x66,0x67
000128  68696a6b          DCB      0x68,0x69,0x6a,0x6b
00012c  6c6d6e6f          DCB      0x6c,0x6d,0x6e,0x6f
000130  70717273          DCB      0x70,0x71,0x72,0x73
000134  74757677          DCB      0x74,0x75,0x76,0x77
000138  78797a7b          DCB      0x78,0x79,0x7a,0x7b
00013c  7c7d7e7f          DCB      0x7c,0x7d,0x7e,0x7f
000140  80818283          DCB      0x80,0x81,0x82,0x83
000144  84858687          DCB      0x84,0x85,0x86,0x87
000148  88898a8b          DCB      0x88,0x89,0x8a,0x8b
00014c  8c8d8e8f          DCB      0x8c,0x8d,0x8e,0x8f
000150  90919293          DCB      0x90,0x91,0x92,0x93
000154  94959697          DCB      0x94,0x95,0x96,0x97
000158  98999a9b          DCB      0x98,0x99,0x9a,0x9b
00015c  9c9d9e9f          DCB      0x9c,0x9d,0x9e,0x9f
000160  a0a1a2a3          DCB      0xa0,0xa1,0xa2,0xa3
000164  a4a5a6a7          DCB      0xa4,0xa5,0xa6,0xa7
000168  a8a9aaab          DCB      0xa8,0xa9,0xaa,0xab
00016c  acadaeaf          DCB      0xac,0xad,0xae,0xaf
000170  b0b1b2b3          DCB      0xb0,0xb1,0xb2,0xb3
000174  b4b5b6b7          DCB      0xb4,0xb5,0xb6,0xb7
000178  b8b9babb          DCB      0xb8,0xb9,0xba,0xbb
00017c  bcbdbebf          DCB      0xbc,0xbd,0xbe,0xbf
000180  c0c1c2c3          DCB      0xc0,0xc1,0xc2,0xc3
000184  c4c5c6c7          DCB      0xc4,0xc5,0xc6,0xc7
000188  c8c9cacb          DCB      0xc8,0xc9,0xca,0xcb
00018c  cccdcecf          DCB      0xcc,0xcd,0xce,0xcf
000190  d0d1d2d3          DCB      0xd0,0xd1,0xd2,0xd3
000194  d4d5d6d7          DCB      0xd4,0xd5,0xd6,0xd7
000198  d8d9dadb          DCB      0xd8,0xd9,0xda,0xdb
00019c  dcdddedf          DCB      0xdc,0xdd,0xde,0xdf
0001a0  e0e1e2e3          DCB      0xe0,0xe1,0xe2,0xe3
0001a4  e4e5e6e7          DCB      0xe4,0xe5,0xe6,0xe7
0001a8  e8e9eaeb          DCB      0xe8,0xe9,0xea,0xeb
0001ac  ecedeeef          DCB      0xec,0xed,0xee,0xef
0001b0  f0f1f2f3          DCB      0xf0,0xf1,0xf2,0xf3
0001b4  f4f5f6f7          DCB      0xf4,0xf5,0xf6,0xf7
0001b8  f8f9fafb          DCB      0xf8,0xf9,0xfa,0xfb
0001bc  fcfdfeff          DCB      0xfc,0xfd,0xfe,0xff
0001c0  ffffffff          DCB      0xff,0xff,0xff,0xff
0001c4  ffffffff          DCB      0xff,0xff,0xff,0xff
0001c8  ffffffff          DCB      0xff,0xff,0xff,0xff
0001cc  ffffffff          DCB      0xff,0xff,0xff,0xff
0001d0  ffffffff          DCB      0xff,0xff,0xff,0xff
0001d4  ffffffff          DCB      0xff,0xff,0xff,0xff
0001d8  ffffffff          DCB      0xff,0xff,0xff,0xff
0001dc  ffffffff          DCB      0xff,0xff,0xff,0xff
0001e0  ffffffff          DCB      0xff,0xff,0xff,0xff
0001e4  ffffffff          DCB      0xff,0xff,0xff,0xff
0001e8  ffffffff          DCB      0xff,0xff,0xff,0xff
0001ec  ffffffff          DCB      0xff,0xff,0xff,0xff
0001f0  ffffffff          DCB      0xff,0xff,0xff,0xff
0001f4  ffffffff          DCB      0xff,0xff,0xff,0xff
0001f8  ffffffff          DCB      0xff,0xff,0xff,0xff
0001fc  ffffffff          DCB      0xff,0xff,0xff,0xff
000200  ffffffff          DCB      0xff,0xff,0xff,0xff
000204  ffffffff          DCB      0xff,0xff,0xff,0xff
000208  ffffffff          DCB      0xff,0xff,0xff,0xff
00020c  ffffffff          DCB      0xff,0xff,0xff,0xff
000210  ffffffff          DCB      0xff,0xff,0xff,0xff
000214  ffffffff          DCB      0xff,0xff,0xff,0xff
000218  ffffffff          DCB      0xff,0xff,0xff,0xff
00021c  ffffffff          DCB      0xff,0xff,0xff,0xff
000220  ffffffff          DCB      0xff,0xff,0xff,0xff
000224  ffffffff          DCB      0xff,0xff,0xff,0xff
000228  ffffffff          DCB      0xff,0xff,0xff,0xff
00022c  ffffffff          DCB      0xff,0xff,0xff,0xff
000230  ffffffff          DCB      0xff,0xff,0xff,0xff
000234  ffffffff          DCB      0xff,0xff,0xff,0xff
000238  ffffffff          DCB      0xff,0xff,0xff,0xff
00023c  ffffffff          DCB      0xff,0xff,0xff,0xff
000240  ffffffff          DCB      0xff,0xff,0xff,0xff
000244  ffffffff          DCB      0xff,0xff,0xff,0xff
000248  ffffffff          DCB      0xff,0xff,0xff,0xff
00024c  ffffffff          DCB      0xff,0xff,0xff,0xff
000250  ffffffff          DCB      0xff,0xff,0xff,0xff
000254  ffffffff          DCB      0xff,0xff,0xff,0xff
000258  ffffffff          DCB      0xff,0xff,0xff,0xff
00025c  ffffffff          DCB      0xff,0xff,0xff,0xff
000260  ffffffff          DCB      0xff,0xff,0xff,0xff
000264  ffffffff          DCB      0xff,0xff,0xff,0xff
000268  ffffffff          DCB      0xff,0xff,0xff,0xff
00026c  ffffffff          DCB      0xff,0xff,0xff,0xff
000270  ffffffff          DCB      0xff,0xff,0xff,0xff
000274  ffffffff          DCB      0xff,0xff,0xff,0xff
000278  ffffffff          DCB      0xff,0xff,0xff,0xff
00027c  ffffffff          DCB      0xff,0xff,0xff,0xff
000280  ffffffff          DCB      0xff,0xff,0xff,0xff
000284  ffffffff          DCB      0xff,0xff,0xff,0xff
000288  ffffffff          DCB      0xff,0xff,0xff,0xff
00028c  ffffffff          DCB      0xff,0xff,0xff,0xff
000290  ffffffff          DCB      0xff,0xff,0xff,0xff
000294  ffffffff          DCB      0xff,0xff,0xff,0xff
000298  ffffffff          DCB      0xff,0xff,0xff,0xff
00029c  ffffffff          DCB      0xff,0xff,0xff,0xff
0002a0  ffffffff          DCB      0xff,0xff,0xff,0xff
0002a4  ffffffff          DCB      0xff,0xff,0xff,0xff
0002a8  ffffffff          DCB      0xff,0xff,0xff,0xff
0002ac  ffffffff          DCB      0xff,0xff,0xff,0xff
0002b0  ffffffff          DCB      0xff,0xff,0xff,0xff
0002b4  ffffffff          DCB      0xff,0xff,0xff,0xff
0002b8  ffffffff          DCB      0xff,0xff,0xff,0xff
0002bc  ffffffff          DCB      0xff,0xff,0xff,0xff
0002c0  00000000          DCB      0x00,0x00,0x00,0x00
0002c4  00000000          DCB      0x00,0x00,0x00,0x00
0002c8  00000000          DCB      0x00,0x00,0x00,0x00
0002cc  00000000          DCB      0x00,0x00,0x00,0x00
0002d0  00000000          DCB      0x00,0x00,0x00,0x00
0002d4  00000000          DCB      0x00,0x00,0x00,0x00
0002d8  00000000          DCB      0x00,0x00,0x00,0x00
0002dc  00000000          DCB      0x00,0x00,0x00,0x00
0002e0  00000000          DCB      0x00,0x00,0x00,0x00
0002e4  00000000          DCB      0x00,0x00,0x00,0x00
0002e8  00000000          DCB      0x00,0x00,0x00,0x00
0002ec  00000000          DCB      0x00,0x00,0x00,0x00
0002f0  00000000          DCB      0x00,0x00,0x00,0x00
0002f4  00000000          DCB      0x00,0x00,0x00,0x00
0002f8  00000000          DCB      0x00,0x00,0x00,0x00
0002fc  00000000          DCB      0x00,0x00,0x00,0x00
000300  00000000          DCB      0x00,0x00,0x00,0x00
000304  00000000          DCB      0x00,0x00,0x00,0x00
000308  00000000          DCB      0x00,0x00,0x00,0x00
00030c  00000000          DCB      0x00,0x00,0x00,0x00
000310  00000000          DCB      0x00,0x00,0x00,0x00
000314  00000000          DCB      0x00,0x00,0x00,0x00
000318  00000000          DCB      0x00,0x00,0x00,0x00
00031c  00000000          DCB      0x00,0x00,0x00,0x00
000320  00000000          DCB      0x00,0x00,0x00,0x00
000324  00000000          DCB      0x00,0x00,0x00,0x00
000328  00000000          DCB      0x00,0x00,0x00,0x00
00032c  00000000          DCB      0x00,0x00,0x00,0x00
000330  00000000          DCB      0x00,0x00,0x00,0x00
000334  00000000          DCB      0x00,0x00,0x00,0x00
000338  00000000          DCB      0x00,0x00,0x00,0x00
00033c  00000000          DCB      0x00,0x00,0x00,0x00
000340  00000000          DCB      0x00,0x00,0x00,0x00
000344  00000000          DCB      0x00,0x00,0x00,0x00
000348  00000000          DCB      0x00,0x00,0x00,0x00
00034c  00000000          DCB      0x00,0x00,0x00,0x00
000350  00000000          DCB      0x00,0x00,0x00,0x00
000354  00000000          DCB      0x00,0x00,0x00,0x00
000358  00000000          DCB      0x00,0x00,0x00,0x00
00035c  00000000          DCB      0x00,0x00,0x00,0x00
000360  00000000          DCB      0x00,0x00,0x00,0x00
000364  00000000          DCB      0x00,0x00,0x00,0x00
000368  00000000          DCB      0x00,0x00,0x00,0x00
00036c  00000000          DCB      0x00,0x00,0x00,0x00
000370  00000000          DCB      0x00,0x00,0x00,0x00
000374  00000000          DCB      0x00,0x00,0x00,0x00
000378  00000000          DCB      0x00,0x00,0x00,0x00
00037c  00000000          DCB      0x00,0x00,0x00,0x00
000380  00000000          DCB      0x00,0x00,0x00,0x00
000384  00000000          DCB      0x00,0x00,0x00,0x00
000388  00000000          DCB      0x00,0x00,0x00,0x00
00038c  00000000          DCB      0x00,0x00,0x00,0x00
000390  00000000          DCB      0x00,0x00,0x00,0x00
000394  00000000          DCB      0x00,0x00,0x00,0x00
000398  00000000          DCB      0x00,0x00,0x00,0x00
00039c  00000000          DCB      0x00,0x00,0x00,0x00
0003a0  00000000          DCB      0x00,0x00,0x00,0x00
0003a4  00000000          DCB      0x00,0x00,0x00,0x00
0003a8  00000000          DCB      0x00,0x00,0x00,0x00
0003ac  00000000          DCB      0x00,0x00,0x00,0x00
0003b0  00000000          DCB      0x00,0x00,0x00,0x00
0003b4  00000000          DCB      0x00,0x00,0x00,0x00
0003b8  00000000          DCB      0x00,0x00,0x00,0x00
0003bc  00000000          DCB      0x00,0x00,0x00,0x00
0003c0  00000000          DCB      0x00,0x00,0x00,0x00
0003c4  00000000          DCB      0x00,0x00,0x00,0x00
0003c8  00000000          DCB      0x00,0x00,0x00,0x00
0003cc  00000000          DCB      0x00,0x00,0x00,0x00
0003d0  00000000          DCB      0x00,0x00,0x00,0x00
0003d4  00000000          DCB      0x00,0x00,0x00,0x00
0003d8  00000000          DCB      0x00,0x00,0x00,0x00
0003dc  00000000          DCB      0x00,0x00,0x00,0x00
0003e0  00000000          DCB      0x00,0x00,0x00,0x00
0003e4  00000000          DCB      0x00,0x00,0x00,0x00
0003e8  00000000          DCB      0x00,0x00,0x00,0x00
0003ec  00000000          DCB      0x00,0x00,0x00,0x00
0003f0  00000000          DCB      0x00,0x00,0x00,0x00
0003f4  00000000          DCB      0x00,0x00,0x00,0x00
0003f8  00000000          DCB      0x00,0x00,0x00,0x00
0003fc  00000000          DCB      0x00,0x00,0x00,0x00
000400  00000000          DCB      0x00,0x00,0x00,0x00
000404  00000000          DCB      0x00,0x00,0x00,0x00
000408  00000000          DCB      0x00,0x00,0x00,0x00
00040c  00000000          DCB      0x00,0x00,0x00,0x00
000410  00000000          DCB      0x00,0x00,0x00,0x00
000414  00000000          DCB      0x00,0x00,0x00,0x00
000418  00000000          DCB      0x00,0x00,0x00,0x00
00041c  00000000          DCB      0x00,0x00,0x00,0x00
000420  00000000          DCB      0x00,0x00,0x00,0x00
000424  00000000          DCB      0x00,0x00,0x00,0x00
000428  00000000          DCB      0x00,0x00,0x00,0x00
00042c  00000000          DCB      0x00,0x00,0x00,0x00
000430  00000000          DCB      0x00,0x00,0x00,0x00
000434  00000000          DCB      0x00,0x00,0x00,0x00
000438  00000000          DCB      0x00,0x00,0x00,0x00
00043c  00000000          DCB      0x00,0x00,0x00,0x00
000440  00000000          DCB      0x00,0x00,0x00,0x00
000444  00000000          DCB      0x00,0x00,0x00,0x00
000448  00000000          DCB      0x00,0x00,0x00,0x00
00044c  00000000          DCB      0x00,0x00,0x00,0x00
000450  00000000          DCB      0x00,0x00,0x00,0x00
000454  00000000          DCB      0x00,0x00,0x00,0x00
000458  00000000          DCB      0x00,0x00,0x00,0x00
00045c  00000000          DCB      0x00,0x00,0x00,0x00
000460  00000000          DCB      0x00,0x00,0x00,0x00
000464  00000000          DCB      0x00,0x00,0x00,0x00
000468  00000000          DCB      0x00,0x00,0x00,0x00
00046c  00000000          DCB      0x00,0x00,0x00,0x00
000470  00000000          DCB      0x00,0x00,0x00,0x00
000474  00000000          DCB      0x00,0x00,0x00,0x00
000478  00000000          DCB      0x00,0x00,0x00,0x00
00047c  00000000          DCB      0x00,0x00,0x00,0x00
000480  00000000          DCB      0x00,0x00,0x00,0x00
000484  00000000          DCB      0x00,0x00,0x00,0x00
000488  00000000          DCB      0x00,0x00,0x00,0x00
00048c  00000000          DCB      0x00,0x00,0x00,0x00
000490  00000000          DCB      0x00,0x00,0x00,0x00
000494  00000000          DCB      0x00,0x00,0x00,0x00
000498  00000000          DCB      0x00,0x00,0x00,0x00
00049c  00000000          DCB      0x00,0x00,0x00,0x00
0004a0  00000000          DCB      0x00,0x00,0x00,0x00
0004a4  00000000          DCB      0x00,0x00,0x00,0x00
0004a8  00000000          DCB      0x00,0x00,0x00,0x00
0004ac  00000000          DCB      0x00,0x00,0x00,0x00
0004b0  00000000          DCB      0x00,0x00,0x00,0x00
0004b4  00000000          DCB      0x00,0x00,0x00,0x00
0004b8  00000000          DCB      0x00,0x00,0x00,0x00
0004bc  00000000          DCB      0x00,0x00,0x00,0x00

                          AREA ||.data||, DATA, ALIGN=2

                  f_jpeg
                          DCD      0x00000000
                  jpeg_dev
                          DCD      0x00000000
                  jpg_buffer
                          DCD      0x00000000
